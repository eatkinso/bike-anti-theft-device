ARM GAS  /tmp/cclY80Kt.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"stm32_systime.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.CalendarDiv86400,"ax",%progbits
  16              		.align	1
  17              		.arch armv7e-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	CalendarDiv86400:
  24              	.LVL0:
  25              	.LFB13:
  26              		.file 1 "Utilities/misc/stm32_systime.c"
   1:Utilities/misc/stm32_systime.c **** /*!
   2:Utilities/misc/stm32_systime.c ****  * \file      systime.c
   3:Utilities/misc/stm32_systime.c ****  *
   4:Utilities/misc/stm32_systime.c ****  * \brief     System time functions implementation.
   5:Utilities/misc/stm32_systime.c ****  *
   6:Utilities/misc/stm32_systime.c ****  * \copyright Revised BSD License, see section \ref LICENSE.
   7:Utilities/misc/stm32_systime.c ****  *
   8:Utilities/misc/stm32_systime.c ****  * \code
   9:Utilities/misc/stm32_systime.c ****  *                ______                              _
  10:Utilities/misc/stm32_systime.c ****  *               / _____)             _              | |
  11:Utilities/misc/stm32_systime.c ****  *              ( (____  _____ ____ _| |_ _____  ____| |__
  12:Utilities/misc/stm32_systime.c ****  *               \____ \| ___ |    (_   _) ___ |/ ___)  _ \
  13:Utilities/misc/stm32_systime.c ****  *               _____) ) ____| | | || |_| ____( (___| | | |
  14:Utilities/misc/stm32_systime.c ****  *              (______/|_____)_|_|_| \__)_____)\____)_| |_|
  15:Utilities/misc/stm32_systime.c ****  *              (C)2013-2018 Semtech - STMicroelectronics
  16:Utilities/misc/stm32_systime.c ****  *
  17:Utilities/misc/stm32_systime.c ****  * \endcode
  18:Utilities/misc/stm32_systime.c ****  *
  19:Utilities/misc/stm32_systime.c ****  * \author    Miguel Luis ( Semtech )
  20:Utilities/misc/stm32_systime.c ****  *
  21:Utilities/misc/stm32_systime.c ****  * \author    Gregory Cristian ( Semtech )
  22:Utilities/misc/stm32_systime.c ****  *
  23:Utilities/misc/stm32_systime.c ****  * \author    MCD Application Team ( STMicroelectronics International )
  24:Utilities/misc/stm32_systime.c ****  */
  25:Utilities/misc/stm32_systime.c **** /**
  26:Utilities/misc/stm32_systime.c **** ******************************************************************************
  27:Utilities/misc/stm32_systime.c ****  * @file  stm32_systime.c
  28:Utilities/misc/stm32_systime.c ****  * @author  MCD Application Team
  29:Utilities/misc/stm32_systime.c ****  * @brief   System time functions implementation
  30:Utilities/misc/stm32_systime.c ****  ******************************************************************************
  31:Utilities/misc/stm32_systime.c ****  * @attention
  32:Utilities/misc/stm32_systime.c ****  *
ARM GAS  /tmp/cclY80Kt.s 			page 2


  33:Utilities/misc/stm32_systime.c ****  * <h2><center>&copy; Copyright (c) 2019 STMicroelectronics. 
  34:Utilities/misc/stm32_systime.c ****  * All rights reserved.</center></h2>
  35:Utilities/misc/stm32_systime.c ****  *
  36:Utilities/misc/stm32_systime.c ****  * This software component is licensed by ST under BSD 3-Clause license,
  37:Utilities/misc/stm32_systime.c ****  * the "License"; You may not use this file except in compliance with the 
  38:Utilities/misc/stm32_systime.c ****  * License. You may obtain a copy of the License at:
  39:Utilities/misc/stm32_systime.c ****  *            opensource.org/licenses/BSD-3-Clause
  40:Utilities/misc/stm32_systime.c ****  *
  41:Utilities/misc/stm32_systime.c ****  ******************************************************************************
  42:Utilities/misc/stm32_systime.c ****  */
  43:Utilities/misc/stm32_systime.c **** 
  44:Utilities/misc/stm32_systime.c **** /* Includes ------------------------------------------------------------------*/
  45:Utilities/misc/stm32_systime.c **** #include <stdio.h>
  46:Utilities/misc/stm32_systime.c **** #include "stm32_systime.h"
  47:Utilities/misc/stm32_systime.c **** 
  48:Utilities/misc/stm32_systime.c **** /** @addtogroup SYS_TIME
  49:Utilities/misc/stm32_systime.c ****   * @{
  50:Utilities/misc/stm32_systime.c ****   */
  51:Utilities/misc/stm32_systime.c **** 
  52:Utilities/misc/stm32_systime.c **** /* Private defines -----------------------------------------------------------*/
  53:Utilities/misc/stm32_systime.c **** /**
  54:Utilities/misc/stm32_systime.c ****  * @defgroup SYS_TIME_private_defines SYS_TIME private defines
  55:Utilities/misc/stm32_systime.c ****  *  @{
  56:Utilities/misc/stm32_systime.c ****  */
  57:Utilities/misc/stm32_systime.c ****  
  58:Utilities/misc/stm32_systime.c **** /**
  59:Utilities/misc/stm32_systime.c ****   * @brief number of day in leap year up to the end of February
  60:Utilities/misc/stm32_systime.c ****   *
  61:Utilities/misc/stm32_systime.c ****   */
  62:Utilities/misc/stm32_systime.c **** #define END_OF_FEBRUARY_LEAP             60 //31+29
  63:Utilities/misc/stm32_systime.c **** 
  64:Utilities/misc/stm32_systime.c **** /**
  65:Utilities/misc/stm32_systime.c ****   * @brief number of day in leap year up to the end of july
  66:Utilities/misc/stm32_systime.c ****   *
  67:Utilities/misc/stm32_systime.c ****   */
  68:Utilities/misc/stm32_systime.c **** #define END_OF_JULY_LEAP              213 //31+29+...
  69:Utilities/misc/stm32_systime.c **** 
  70:Utilities/misc/stm32_systime.c **** /**
  71:Utilities/misc/stm32_systime.c ****   * @brief number of day in normal year up to the end of February
  72:Utilities/misc/stm32_systime.c ****   *
  73:Utilities/misc/stm32_systime.c ****   */
  74:Utilities/misc/stm32_systime.c **** #define END_OF_FEBRUARY_NORM             59 //31+28
  75:Utilities/misc/stm32_systime.c **** 
  76:Utilities/misc/stm32_systime.c **** /**
  77:Utilities/misc/stm32_systime.c ****   * @brief number of day in normal year up to the end of july
  78:Utilities/misc/stm32_systime.c ****   *
  79:Utilities/misc/stm32_systime.c ****   */
  80:Utilities/misc/stm32_systime.c **** #define END_OF_JULY_NORM              212 //31+28+...
  81:Utilities/misc/stm32_systime.c **** 
  82:Utilities/misc/stm32_systime.c **** /**
  83:Utilities/misc/stm32_systime.c ****   * @brief delta is referenced to Unix time
  84:Utilities/misc/stm32_systime.c ****   * @note UNIX time 0 = starts at 01:00:00, 01/01/1970
  85:Utilities/misc/stm32_systime.c ****   * but calculation is easier from Monday 1st January 1968 
  86:Utilities/misc/stm32_systime.c ****   *
  87:Utilities/misc/stm32_systime.c ****   */
  88:Utilities/misc/stm32_systime.c **** #define CALC_REF_YEAR                  68 
  89:Utilities/misc/stm32_systime.c **** 
ARM GAS  /tmp/cclY80Kt.s 			page 3


  90:Utilities/misc/stm32_systime.c **** /**
  91:Utilities/misc/stm32_systime.c ****   * @brief delta is referenced to Unix time
  92:Utilities/misc/stm32_systime.c ****   * @note UNIX time 0 = starts at 01:00:00, 01/01/1970
  93:Utilities/misc/stm32_systime.c ****   * but calculation is easier from Monday 1st January 1968 
  94:Utilities/misc/stm32_systime.c ****   *
  95:Utilities/misc/stm32_systime.c ****   */
  96:Utilities/misc/stm32_systime.c **** #define CALC_REF_YEAR_TO_UNIX_REF_YEAR_COMPENSATION_IN_SECONDS  ( ( TM_DAYS_IN_LEAP_YEAR + TM_DAYS_
  97:Utilities/misc/stm32_systime.c **** 
  98:Utilities/misc/stm32_systime.c **** /**
  99:Utilities/misc/stm32_systime.c ****   * @brief month correction table of a normal year. To calculate the day number within a year
 100:Utilities/misc/stm32_systime.c ****   * @note error compensation is between 0 and 2 days. 2 bits per month
 101:Utilities/misc/stm32_systime.c ****   *
 102:Utilities/misc/stm32_systime.c ****   */
 103:Utilities/misc/stm32_systime.c **** #define  DAYS_IN_MONTH_CORRECTION_NORM        ( (uint32_t )0x99AAA0 )
 104:Utilities/misc/stm32_systime.c **** 
 105:Utilities/misc/stm32_systime.c **** /**
 106:Utilities/misc/stm32_systime.c ****   * @brief month correction table of a leap year. To calculate the day number within a year
 107:Utilities/misc/stm32_systime.c ****   * @note error compensation is between 0 and 2 days. 2 bits per month
 108:Utilities/misc/stm32_systime.c ****   *
 109:Utilities/misc/stm32_systime.c ****   */
 110:Utilities/misc/stm32_systime.c **** #define  DAYS_IN_MONTH_CORRECTION_LEAP        ( (uint32_t )0x445550 )
 111:Utilities/misc/stm32_systime.c **** 
 112:Utilities/misc/stm32_systime.c **** /**
 113:Utilities/misc/stm32_systime.c ****   * @brief find  X/365.25
 114:Utilities/misc/stm32_systime.c ****   *
 115:Utilities/misc/stm32_systime.c ****   */
 116:Utilities/misc/stm32_systime.c **** /* 365.25 = (366 + 365 + 365 + 365)/4 */
 117:Utilities/misc/stm32_systime.c **** #define DIV_365_25( X )                 ( ( ( X ) * 91867 + 22750 ) >> 25 )
 118:Utilities/misc/stm32_systime.c **** 
 119:Utilities/misc/stm32_systime.c **** /**
 120:Utilities/misc/stm32_systime.c ****   * @brief find the nearest quotient of X/86400 (8640 number of seconds in one week)
 121:Utilities/misc/stm32_systime.c ****   *
 122:Utilities/misc/stm32_systime.c ****   */
 123:Utilities/misc/stm32_systime.c **** #define DIV_APPROX_86400( X )             ( ( ( X ) >> 18 ) + ( ( X ) >> 17 ) )
 124:Utilities/misc/stm32_systime.c **** 
 125:Utilities/misc/stm32_systime.c **** /**
 126:Utilities/misc/stm32_systime.c ****   * @brief find the nearest quotient of X/1000
 127:Utilities/misc/stm32_systime.c ****   *
 128:Utilities/misc/stm32_systime.c ****   */
 129:Utilities/misc/stm32_systime.c **** #define DIV_APPROX_1000( X )            ( ( ( X ) >> 10 ) +( ( X ) >> 16 ) + ( ( X ) >> 17 ) )
 130:Utilities/misc/stm32_systime.c **** 
 131:Utilities/misc/stm32_systime.c **** /**
 132:Utilities/misc/stm32_systime.c ****   * @brief find the nearest quotient of X/60
 133:Utilities/misc/stm32_systime.c ****   *
 134:Utilities/misc/stm32_systime.c ****   */
 135:Utilities/misc/stm32_systime.c **** #define DIV_APPROX_60( X )              ( ( ( X ) * 17476 ) >> 20 )
 136:Utilities/misc/stm32_systime.c **** 
 137:Utilities/misc/stm32_systime.c **** /**
 138:Utilities/misc/stm32_systime.c ****   * @brief find the nearest quotient of X/61
 139:Utilities/misc/stm32_systime.c ****   *
 140:Utilities/misc/stm32_systime.c ****   */
 141:Utilities/misc/stm32_systime.c **** #define DIV_APPROX_61( X )              ( ( ( X ) * 68759 ) >> 22 )
 142:Utilities/misc/stm32_systime.c **** 
 143:Utilities/misc/stm32_systime.c **** /**
 144:Utilities/misc/stm32_systime.c ****   * @brief Calculates mod(x,7)
 145:Utilities/misc/stm32_systime.c ****   *
 146:Utilities/misc/stm32_systime.c ****   */
ARM GAS  /tmp/cclY80Kt.s 			page 4


 147:Utilities/misc/stm32_systime.c **** #define MODULO_7( X )                 ( ( X ) -( ( ( ( ( X ) + 1 ) * 299593 ) >> 21 ) * 7 ) )
 148:Utilities/misc/stm32_systime.c **** 
 149:Utilities/misc/stm32_systime.c **** /**
 150:Utilities/misc/stm32_systime.c ****   * @brief Calculates ceiling( X / N )
 151:Utilities/misc/stm32_systime.c ****   *
 152:Utilities/misc/stm32_systime.c ****   */
 153:Utilities/misc/stm32_systime.c **** #define DIVC( X, N )                ( ( ( X ) + ( N ) -1 ) / ( N ) )
 154:Utilities/misc/stm32_systime.c **** 
 155:Utilities/misc/stm32_systime.c **** /**
 156:Utilities/misc/stm32_systime.c ****   * @brief Calculates ceiling( X / 4 )
 157:Utilities/misc/stm32_systime.c ****   *
 158:Utilities/misc/stm32_systime.c ****   */
 159:Utilities/misc/stm32_systime.c **** #define DIVC_BY_4( X )                ( ( ( X ) + 3 ) >>2 )
 160:Utilities/misc/stm32_systime.c **** 
 161:Utilities/misc/stm32_systime.c **** /**
 162:Utilities/misc/stm32_systime.c ****   * @brief Calculates ceiling( X / 2 )
 163:Utilities/misc/stm32_systime.c ****   *
 164:Utilities/misc/stm32_systime.c ****   */
 165:Utilities/misc/stm32_systime.c **** #define DIVC_BY_2( X )                ( ( ( X ) + 1 ) >> 1 )
 166:Utilities/misc/stm32_systime.c **** /**
 167:Utilities/misc/stm32_systime.c ****   *  @}
 168:Utilities/misc/stm32_systime.c ****   */
 169:Utilities/misc/stm32_systime.c **** 
 170:Utilities/misc/stm32_systime.c **** /* Private constants -----------------------------------------------------------*/
 171:Utilities/misc/stm32_systime.c **** /**
 172:Utilities/misc/stm32_systime.c ****  * @defgroup SYSTIME_private_variable SYSTIME private constants
 173:Utilities/misc/stm32_systime.c ****  *  @{
 174:Utilities/misc/stm32_systime.c ****  */
 175:Utilities/misc/stm32_systime.c **** const char *WeekDayString[]={ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
 176:Utilities/misc/stm32_systime.c **** /**
 177:Utilities/misc/stm32_systime.c ****   *  @}
 178:Utilities/misc/stm32_systime.c ****   */
 179:Utilities/misc/stm32_systime.c **** 
 180:Utilities/misc/stm32_systime.c **** /* Private function prototypes -----------------------------------------------*/
 181:Utilities/misc/stm32_systime.c **** 
 182:Utilities/misc/stm32_systime.c **** /**
 183:Utilities/misc/stm32_systime.c ****  * @defgroup SYSTIME_private_function_prototypes SYSTIME private function prototypes
 184:Utilities/misc/stm32_systime.c ****  *  @{
 185:Utilities/misc/stm32_systime.c ****  */
 186:Utilities/misc/stm32_systime.c **** static uint32_t CalendarGetMonth( uint32_t days, uint32_t year );
 187:Utilities/misc/stm32_systime.c **** static void CalendarDiv86400( uint32_t in, uint32_t* out, uint32_t* remainder );
 188:Utilities/misc/stm32_systime.c **** static uint32_t CalendarDiv61( uint32_t in );
 189:Utilities/misc/stm32_systime.c **** static void CalendarDiv60( uint32_t in, uint32_t* out, uint32_t* remainder );
 190:Utilities/misc/stm32_systime.c **** /**
 191:Utilities/misc/stm32_systime.c ****   *  @}
 192:Utilities/misc/stm32_systime.c ****   */
 193:Utilities/misc/stm32_systime.c **** 
 194:Utilities/misc/stm32_systime.c **** /* Functions Definition ------------------------------------------------------*/
 195:Utilities/misc/stm32_systime.c **** /**
 196:Utilities/misc/stm32_systime.c ****   * @addtogroup SYSTIME_exported_function
 197:Utilities/misc/stm32_systime.c ****   *  @{
 198:Utilities/misc/stm32_systime.c ****   */
 199:Utilities/misc/stm32_systime.c **** 
 200:Utilities/misc/stm32_systime.c **** SysTime_t SysTimeAdd( SysTime_t a, SysTime_t b )
 201:Utilities/misc/stm32_systime.c **** {
 202:Utilities/misc/stm32_systime.c ****   SysTime_t c =  { .Seconds = 0, .SubSeconds = 0 };
 203:Utilities/misc/stm32_systime.c **** 
ARM GAS  /tmp/cclY80Kt.s 			page 5


 204:Utilities/misc/stm32_systime.c ****   c.Seconds = a.Seconds + b.Seconds;
 205:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds + b.SubSeconds;
 206:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 207:Utilities/misc/stm32_systime.c ****   {
 208:Utilities/misc/stm32_systime.c ****     c.Seconds++;
 209:Utilities/misc/stm32_systime.c ****     c.SubSeconds -= 1000;
 210:Utilities/misc/stm32_systime.c ****   }
 211:Utilities/misc/stm32_systime.c ****   return c;
 212:Utilities/misc/stm32_systime.c **** }
 213:Utilities/misc/stm32_systime.c **** 
 214:Utilities/misc/stm32_systime.c **** SysTime_t SysTimeSub( SysTime_t a, SysTime_t b )
 215:Utilities/misc/stm32_systime.c **** {
 216:Utilities/misc/stm32_systime.c ****   SysTime_t c = { .Seconds = 0, .SubSeconds = 0 };
 217:Utilities/misc/stm32_systime.c **** 
 218:Utilities/misc/stm32_systime.c ****   c.Seconds = a.Seconds - b.Seconds;
 219:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds - b.SubSeconds;
 220:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
 221:Utilities/misc/stm32_systime.c ****   {
 222:Utilities/misc/stm32_systime.c ****     c.Seconds--;
 223:Utilities/misc/stm32_systime.c ****     c.SubSeconds += 1000;
 224:Utilities/misc/stm32_systime.c ****   }
 225:Utilities/misc/stm32_systime.c ****   return c;
 226:Utilities/misc/stm32_systime.c **** }
 227:Utilities/misc/stm32_systime.c **** 
 228:Utilities/misc/stm32_systime.c **** void SysTimeSet( SysTime_t sysTime )
 229:Utilities/misc/stm32_systime.c **** {
 230:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 231:Utilities/misc/stm32_systime.c ****   
 232:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 233:Utilities/misc/stm32_systime.c **** 
 234:Utilities/misc/stm32_systime.c ****   calendarTime.Seconds = UTIL_SYSTIMDriver.GetCalendarTime( ( uint16_t* )&calendarTime.SubSeconds )
 235:Utilities/misc/stm32_systime.c **** 
 236:Utilities/misc/stm32_systime.c ****   // sysTime is UNIX epoch
 237:Utilities/misc/stm32_systime.c ****   DeltaTime = SysTimeSub( sysTime, calendarTime );
 238:Utilities/misc/stm32_systime.c **** 
 239:Utilities/misc/stm32_systime.c ****   UTIL_SYSTIMDriver.BKUPWrite_Seconds( DeltaTime.Seconds );
 240:Utilities/misc/stm32_systime.c ****   UTIL_SYSTIMDriver.BKUPWrite_SubSeconds( ( uint32_t ) DeltaTime.SubSeconds );
 241:Utilities/misc/stm32_systime.c **** }
 242:Utilities/misc/stm32_systime.c **** 
 243:Utilities/misc/stm32_systime.c **** SysTime_t SysTimeGet( void )
 244:Utilities/misc/stm32_systime.c **** {
 245:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 246:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = 0, .SubSeconds = 0 };
 247:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 248:Utilities/misc/stm32_systime.c **** 
 249:Utilities/misc/stm32_systime.c ****   calendarTime.Seconds = UTIL_SYSTIMDriver.GetCalendarTime( ( uint16_t* )&calendarTime.SubSeconds )
 250:Utilities/misc/stm32_systime.c **** 
 251:Utilities/misc/stm32_systime.c ****   DeltaTime.SubSeconds = (int16_t)UTIL_SYSTIMDriver.BKUPRead_SubSeconds();
 252:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 253:Utilities/misc/stm32_systime.c **** 
 254:Utilities/misc/stm32_systime.c ****   sysTime = SysTimeAdd( DeltaTime, calendarTime );
 255:Utilities/misc/stm32_systime.c **** 
 256:Utilities/misc/stm32_systime.c ****   return sysTime;
 257:Utilities/misc/stm32_systime.c **** }
 258:Utilities/misc/stm32_systime.c **** 
 259:Utilities/misc/stm32_systime.c **** 
 260:Utilities/misc/stm32_systime.c **** SysTime_t SysTimeGetMcuTime( void )
ARM GAS  /tmp/cclY80Kt.s 			page 6


 261:Utilities/misc/stm32_systime.c **** {
 262:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 263:Utilities/misc/stm32_systime.c **** 
 264:Utilities/misc/stm32_systime.c ****   calendarTime.Seconds = UTIL_SYSTIMDriver.GetCalendarTime( ( uint16_t* )&calendarTime.SubSeconds )
 265:Utilities/misc/stm32_systime.c ****   
 266:Utilities/misc/stm32_systime.c ****   return calendarTime;
 267:Utilities/misc/stm32_systime.c **** }
 268:Utilities/misc/stm32_systime.c **** 
 269:Utilities/misc/stm32_systime.c **** uint32_t SysTimeToMs( SysTime_t sysTime )
 270:Utilities/misc/stm32_systime.c **** {
 271:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 272:Utilities/misc/stm32_systime.c ****   DeltaTime.SubSeconds = (int16_t)UTIL_SYSTIMDriver.BKUPRead_SubSeconds();
 273:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 274:Utilities/misc/stm32_systime.c ****   
 275:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = SysTimeSub( sysTime, DeltaTime );
 276:Utilities/misc/stm32_systime.c ****   return calendarTime.Seconds * 1000 + calendarTime.SubSeconds;
 277:Utilities/misc/stm32_systime.c **** }
 278:Utilities/misc/stm32_systime.c **** 
 279:Utilities/misc/stm32_systime.c **** SysTime_t SysTimeFromMs( uint32_t timeMs )
 280:Utilities/misc/stm32_systime.c **** {
 281:Utilities/misc/stm32_systime.c ****   uint32_t seconds = timeMs / 1000;
 282:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = seconds, .SubSeconds =  timeMs - seconds * 1000 };
 283:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
 284:Utilities/misc/stm32_systime.c **** 
 285:Utilities/misc/stm32_systime.c ****   DeltaTime.SubSeconds = (int16_t)UTIL_SYSTIMDriver.BKUPRead_SubSeconds();
 286:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 287:Utilities/misc/stm32_systime.c ****   return SysTimeAdd( sysTime, DeltaTime );
 288:Utilities/misc/stm32_systime.c **** }
 289:Utilities/misc/stm32_systime.c **** 
 290:Utilities/misc/stm32_systime.c **** uint32_t SysTimeMkTime( const struct tm* localtime )
 291:Utilities/misc/stm32_systime.c **** {
 292:Utilities/misc/stm32_systime.c ****   uint32_t nbdays;
 293:Utilities/misc/stm32_systime.c ****   uint32_t nbsecs;
 294:Utilities/misc/stm32_systime.c ****   uint32_t year = localtime->tm_year - CALC_REF_YEAR;
 295:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 296:Utilities/misc/stm32_systime.c ****   {
 297:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_LEAP,
 298:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM,
 299:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM,
 300:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM
 301:Utilities/misc/stm32_systime.c ****   };
 302:Utilities/misc/stm32_systime.c **** 
 303:Utilities/misc/stm32_systime.c ****   nbdays = DIVC( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * year, 4 );
 304:Utilities/misc/stm32_systime.c **** 
 305:Utilities/misc/stm32_systime.c ****   nbdays += ( DIVC_BY_2( ( localtime->tm_mon ) * ( 30 + 31 ) ) -
 306:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) ) );
 307:Utilities/misc/stm32_systime.c **** 
 308:Utilities/misc/stm32_systime.c ****   nbdays += ( localtime->tm_mday - 1 );
 309:Utilities/misc/stm32_systime.c **** 
 310:Utilities/misc/stm32_systime.c ****   // Convert from days to seconds
 311:Utilities/misc/stm32_systime.c ****   nbsecs = nbdays * TM_SECONDS_IN_1DAY;
 312:Utilities/misc/stm32_systime.c **** 
 313:Utilities/misc/stm32_systime.c ****   nbsecs += ( ( uint32_t )localtime->tm_sec + 
 314:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_min * TM_SECONDS_IN_1MINUTE ) +
 315:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_hour * TM_SECONDS_IN_1HOUR ) );
 316:Utilities/misc/stm32_systime.c ****   return nbsecs - CALC_REF_YEAR_TO_UNIX_REF_YEAR_COMPENSATION_IN_SECONDS;
 317:Utilities/misc/stm32_systime.c **** }
ARM GAS  /tmp/cclY80Kt.s 			page 7


 318:Utilities/misc/stm32_systime.c **** 
 319:Utilities/misc/stm32_systime.c **** void SysTimeLocalTime( const uint32_t timestamp, struct tm *localtime )
 320:Utilities/misc/stm32_systime.c **** {
 321:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 322:Utilities/misc/stm32_systime.c ****   {
 323:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_LEAP,
 324:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM,
 325:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM,
 326:Utilities/misc/stm32_systime.c ****     DAYS_IN_MONTH_CORRECTION_NORM
 327:Utilities/misc/stm32_systime.c ****   };
 328:Utilities/misc/stm32_systime.c ****   uint32_t weekDays = 1; // Monday 1st January 1968
 329:Utilities/misc/stm32_systime.c ****   uint32_t seconds;
 330:Utilities/misc/stm32_systime.c ****   uint32_t minutes;
 331:Utilities/misc/stm32_systime.c ****   uint32_t days;
 332:Utilities/misc/stm32_systime.c ****   uint32_t divOut;
 333:Utilities/misc/stm32_systime.c ****   uint32_t divReminder;
 334:Utilities/misc/stm32_systime.c **** 
 335:Utilities/misc/stm32_systime.c ****   CalendarDiv86400( timestamp + CALC_REF_YEAR_TO_UNIX_REF_YEAR_COMPENSATION_IN_SECONDS, &days, &sec
 336:Utilities/misc/stm32_systime.c **** 
 337:Utilities/misc/stm32_systime.c ****   // Calculates seconds
 338:Utilities/misc/stm32_systime.c ****   CalendarDiv60( seconds, &minutes, &divReminder );
 339:Utilities/misc/stm32_systime.c ****   localtime->tm_sec = ( uint8_t )divReminder;
 340:Utilities/misc/stm32_systime.c **** 
 341:Utilities/misc/stm32_systime.c ****   // Calculates minutes and hours
 342:Utilities/misc/stm32_systime.c ****   CalendarDiv60( minutes, &divOut, &divReminder);
 343:Utilities/misc/stm32_systime.c ****   localtime->tm_min = ( uint8_t )divReminder;
 344:Utilities/misc/stm32_systime.c ****   localtime->tm_hour = ( uint8_t )divOut;
 345:Utilities/misc/stm32_systime.c **** 
 346:Utilities/misc/stm32_systime.c ****   // Calculates year
 347:Utilities/misc/stm32_systime.c ****   localtime->tm_year = DIV_365_25( days );
 348:Utilities/misc/stm32_systime.c ****   days-= DIVC_BY_4( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * localtime->tm_year );
 349:Utilities/misc/stm32_systime.c **** 
 350:Utilities/misc/stm32_systime.c ****   localtime->tm_yday = days;
 351:Utilities/misc/stm32_systime.c **** 
 352:Utilities/misc/stm32_systime.c ****   // Calculates month
 353:Utilities/misc/stm32_systime.c ****   localtime->tm_mon = CalendarGetMonth( days, localtime->tm_year );
 354:Utilities/misc/stm32_systime.c **** 
 355:Utilities/misc/stm32_systime.c ****   // calculates weekdays
 356:Utilities/misc/stm32_systime.c ****   weekDays += DIVC_BY_4( ( localtime->tm_year * 5 ) );
 357:Utilities/misc/stm32_systime.c ****   weekDays += days;
 358:Utilities/misc/stm32_systime.c ****   localtime->tm_wday = MODULO_7( weekDays );
 359:Utilities/misc/stm32_systime.c **** 
 360:Utilities/misc/stm32_systime.c ****   days -= ( DIVC_BY_2( ( localtime->tm_mon ) * ( 30 + 31 ) ) -
 361:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[localtime->tm_year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) )
 362:Utilities/misc/stm32_systime.c **** 
 363:Utilities/misc/stm32_systime.c ****   // Convert 0 to 1 indexed.
 364:Utilities/misc/stm32_systime.c ****   localtime->tm_mday = days + 1;
 365:Utilities/misc/stm32_systime.c **** 
 366:Utilities/misc/stm32_systime.c ****   localtime->tm_year += CALC_REF_YEAR;
 367:Utilities/misc/stm32_systime.c **** 
 368:Utilities/misc/stm32_systime.c ****   localtime->tm_isdst = -1;
 369:Utilities/misc/stm32_systime.c **** }
 370:Utilities/misc/stm32_systime.c **** 
 371:Utilities/misc/stm32_systime.c **** /**
 372:Utilities/misc/stm32_systime.c ****   *  @}
 373:Utilities/misc/stm32_systime.c ****   */
 374:Utilities/misc/stm32_systime.c ****   
ARM GAS  /tmp/cclY80Kt.s 			page 8


 375:Utilities/misc/stm32_systime.c **** /**************************** Private functions *******************************/
 376:Utilities/misc/stm32_systime.c **** 
 377:Utilities/misc/stm32_systime.c **** /**
 378:Utilities/misc/stm32_systime.c ****   *  @addtogroup SYSTIME_private_function
 379:Utilities/misc/stm32_systime.c ****   *
 380:Utilities/misc/stm32_systime.c ****   *  @{
 381:Utilities/misc/stm32_systime.c ****   */
 382:Utilities/misc/stm32_systime.c **** static uint32_t CalendarGetMonth( uint32_t days, uint32_t year )
 383:Utilities/misc/stm32_systime.c **** {
 384:Utilities/misc/stm32_systime.c ****   uint32_t month;
 385:Utilities/misc/stm32_systime.c ****   if( ( year % 4 ) == 0 )
 386:Utilities/misc/stm32_systime.c ****   {   /*leap year*/
 387:Utilities/misc/stm32_systime.c ****     if( days < END_OF_FEBRUARY_LEAP )
 388:Utilities/misc/stm32_systime.c ****     {   // January or February
 389:Utilities/misc/stm32_systime.c ****       // month =  days * 2 / ( 30 + 31 );
 390:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( days * 2 );
 391:Utilities/misc/stm32_systime.c ****     }
 392:Utilities/misc/stm32_systime.c ****     else if( days < END_OF_JULY_LEAP )
 393:Utilities/misc/stm32_systime.c ****     {
 394:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( ( days - END_OF_FEBRUARY_LEAP ) * 2 ) + 2;
 395:Utilities/misc/stm32_systime.c ****     }
 396:Utilities/misc/stm32_systime.c ****     else
 397:Utilities/misc/stm32_systime.c ****     {
 398:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( ( days - END_OF_JULY_LEAP ) * 2 ) + 7;
 399:Utilities/misc/stm32_systime.c ****     }
 400:Utilities/misc/stm32_systime.c ****   }
 401:Utilities/misc/stm32_systime.c ****   else
 402:Utilities/misc/stm32_systime.c ****   {
 403:Utilities/misc/stm32_systime.c ****     if( days < END_OF_FEBRUARY_NORM )
 404:Utilities/misc/stm32_systime.c ****     {   // January or February
 405:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( days * 2 );
 406:Utilities/misc/stm32_systime.c ****     }
 407:Utilities/misc/stm32_systime.c ****     else if( days < END_OF_JULY_NORM )
 408:Utilities/misc/stm32_systime.c ****     {
 409:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( ( days - END_OF_FEBRUARY_NORM ) * 2 ) + 2;
 410:Utilities/misc/stm32_systime.c ****     }
 411:Utilities/misc/stm32_systime.c ****     else
 412:Utilities/misc/stm32_systime.c ****     {
 413:Utilities/misc/stm32_systime.c ****       month = CalendarDiv61( ( days - END_OF_JULY_NORM ) * 2 ) + 7;
 414:Utilities/misc/stm32_systime.c ****     }
 415:Utilities/misc/stm32_systime.c ****   }
 416:Utilities/misc/stm32_systime.c ****   return month;
 417:Utilities/misc/stm32_systime.c **** }
 418:Utilities/misc/stm32_systime.c **** 
 419:Utilities/misc/stm32_systime.c **** static void CalendarDiv86400( uint32_t in, uint32_t* out, uint32_t* remainder )
 420:Utilities/misc/stm32_systime.c **** {
  27              		.loc 1 420 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              		.loc 1 420 1 is_stmt 0 view .LVU1
  33 0000 30B4     		push	{r4, r5}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 5, -4
ARM GAS  /tmp/cclY80Kt.s 			page 9


 421:Utilities/misc/stm32_systime.c **** #if 0
 422:Utilities/misc/stm32_systime.c ****   *remainder = in % SECONDS_IN_1DAY;
 423:Utilities/misc/stm32_systime.c ****   *out     = in / SECONDS_IN_1DAY;
 424:Utilities/misc/stm32_systime.c **** #else
 425:Utilities/misc/stm32_systime.c ****   uint32_t outTemp = 0;
  38              		.loc 1 425 3 is_stmt 1 view .LVU2
  39              	.LVL1:
 426:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_86400( in );
  40              		.loc 1 426 3 view .LVU3
  41              		.loc 1 426 24 is_stmt 0 view .LVU4
  42 0002 430C     		lsrs	r3, r0, #17
  43              		.loc 1 426 12 view .LVU5
  44 0004 03EB9043 		add	r3, r3, r0, lsr #18
  45              	.LVL2:
 427:Utilities/misc/stm32_systime.c **** 
 428:Utilities/misc/stm32_systime.c ****   while( divResult >=1 )
  46              		.loc 1 428 3 is_stmt 1 view .LVU6
 425:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_86400( in );
  47              		.loc 1 425 12 is_stmt 0 view .LVU7
  48 0008 0024     		movs	r4, #0
  49              		.loc 1 428 8 view .LVU8
  50 000a 06E0     		b	.L2
  51              	.LVL3:
  52              	.L3:
 429:Utilities/misc/stm32_systime.c ****   {
 430:Utilities/misc/stm32_systime.c ****     outTemp += divResult;
  53              		.loc 1 430 5 is_stmt 1 view .LVU9
  54              		.loc 1 430 13 is_stmt 0 view .LVU10
  55 000c 1C44     		add	r4, r4, r3
  56              	.LVL4:
 431:Utilities/misc/stm32_systime.c ****     in -= divResult * 86400;
  57              		.loc 1 431 5 is_stmt 1 view .LVU11
  58              		.loc 1 431 8 is_stmt 0 view .LVU12
  59 000e 0A4D     		ldr	r5, .L6
  60 0010 05FB1300 		mls	r0, r5, r3, r0
  61              	.LVL5:
 432:Utilities/misc/stm32_systime.c ****     divResult= DIV_APPROX_86400( in );
  62              		.loc 1 432 5 is_stmt 1 view .LVU13
  63              		.loc 1 432 16 is_stmt 0 view .LVU14
  64 0014 430C     		lsrs	r3, r0, #17
  65              	.LVL6:
  66              		.loc 1 432 14 view .LVU15
  67 0016 03EB9043 		add	r3, r3, r0, lsr #18
  68              	.LVL7:
  69              	.L2:
 428:Utilities/misc/stm32_systime.c ****   {
  70              		.loc 1 428 8 is_stmt 1 view .LVU16
  71 001a 002B     		cmp	r3, #0
  72 001c F6D1     		bne	.L3
 433:Utilities/misc/stm32_systime.c ****   }
 434:Utilities/misc/stm32_systime.c ****   if( in >= 86400 )
  73              		.loc 1 434 3 view .LVU17
  74              		.loc 1 434 5 is_stmt 0 view .LVU18
  75 001e 074B     		ldr	r3, .L6+4
  76              	.LVL8:
  77              		.loc 1 434 5 view .LVU19
  78 0020 9842     		cmp	r0, r3
ARM GAS  /tmp/cclY80Kt.s 			page 10


  79 0022 04D9     		bls	.L4
 435:Utilities/misc/stm32_systime.c ****   {
 436:Utilities/misc/stm32_systime.c ****     outTemp += 1;
  80              		.loc 1 436 5 is_stmt 1 view .LVU20
  81              		.loc 1 436 13 is_stmt 0 view .LVU21
  82 0024 0134     		adds	r4, r4, #1
  83              	.LVL9:
 437:Utilities/misc/stm32_systime.c ****     in -= 86400;
  84              		.loc 1 437 5 is_stmt 1 view .LVU22
  85              		.loc 1 437 8 is_stmt 0 view .LVU23
  86 0026 A0F5A830 		sub	r0, r0, #86016
  87              	.LVL10:
  88              		.loc 1 437 8 view .LVU24
  89 002a A0F5C070 		sub	r0, r0, #384
  90              	.LVL11:
  91              	.L4:
 438:Utilities/misc/stm32_systime.c ****   }
 439:Utilities/misc/stm32_systime.c **** 
 440:Utilities/misc/stm32_systime.c ****   *remainder = in;
  92              		.loc 1 440 3 is_stmt 1 view .LVU25
  93              		.loc 1 440 14 is_stmt 0 view .LVU26
  94 002e 1060     		str	r0, [r2]
 441:Utilities/misc/stm32_systime.c ****   *out = outTemp;
  95              		.loc 1 441 3 is_stmt 1 view .LVU27
  96              		.loc 1 441 8 is_stmt 0 view .LVU28
  97 0030 0C60     		str	r4, [r1]
 442:Utilities/misc/stm32_systime.c **** #endif
 443:Utilities/misc/stm32_systime.c **** }
  98              		.loc 1 443 1 view .LVU29
  99 0032 30BC     		pop	{r4, r5}
 100              	.LCFI1:
 101              		.cfi_restore 5
 102              		.cfi_restore 4
 103              		.cfi_def_cfa_offset 0
 104              	.LVL12:
 105              		.loc 1 443 1 view .LVU30
 106 0034 7047     		bx	lr
 107              	.L7:
 108 0036 00BF     		.align	2
 109              	.L6:
 110 0038 80510100 		.word	86400
 111 003c 7F510100 		.word	86399
 112              		.cfi_endproc
 113              	.LFE13:
 115              		.section	.text.CalendarDiv61,"ax",%progbits
 116              		.align	1
 117              		.syntax unified
 118              		.thumb
 119              		.thumb_func
 120              		.fpu softvfp
 122              	CalendarDiv61:
 123              	.LVL13:
 124              	.LFB14:
 444:Utilities/misc/stm32_systime.c **** 
 445:Utilities/misc/stm32_systime.c **** static uint32_t CalendarDiv61( uint32_t in )
 446:Utilities/misc/stm32_systime.c **** {
 125              		.loc 1 446 1 is_stmt 1 view -0
ARM GAS  /tmp/cclY80Kt.s 			page 11


 126              		.cfi_startproc
 127              		@ args = 0, pretend = 0, frame = 0
 128              		@ frame_needed = 0, uses_anonymous_args = 0
 129              		@ link register save eliminated.
 130              		.loc 1 446 1 is_stmt 0 view .LVU32
 131 0000 0246     		mov	r2, r0
 447:Utilities/misc/stm32_systime.c **** #if 0
 448:Utilities/misc/stm32_systime.c ****   return( in / 61 );
 449:Utilities/misc/stm32_systime.c **** #else
 450:Utilities/misc/stm32_systime.c ****   uint32_t outTemp = 0;
 132              		.loc 1 450 3 is_stmt 1 view .LVU33
 133              	.LVL14:
 451:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_61( in );
 134              		.loc 1 451 3 view .LVU34
 135              		.loc 1 451 24 is_stmt 0 view .LVU35
 136 0002 0B4B     		ldr	r3, .L12
 137 0004 00FB03F3 		mul	r3, r0, r3
 138              		.loc 1 451 12 view .LVU36
 139 0008 9B0D     		lsrs	r3, r3, #22
 140              	.LVL15:
 452:Utilities/misc/stm32_systime.c ****   while( divResult >=1 )
 141              		.loc 1 452 3 is_stmt 1 view .LVU37
 450:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_61( in );
 142              		.loc 1 450 12 is_stmt 0 view .LVU38
 143 000a 0020     		movs	r0, #0
 144              	.LVL16:
 145              		.loc 1 452 8 view .LVU39
 146 000c 09E0     		b	.L9
 147              	.LVL17:
 148              	.L10:
 453:Utilities/misc/stm32_systime.c ****   {
 454:Utilities/misc/stm32_systime.c ****     outTemp += divResult;
 149              		.loc 1 454 5 is_stmt 1 view .LVU40
 150              		.loc 1 454 13 is_stmt 0 view .LVU41
 151 000e 1844     		add	r0, r0, r3
 152              	.LVL18:
 455:Utilities/misc/stm32_systime.c ****     in -= divResult * 61;
 153              		.loc 1 455 5 is_stmt 1 view .LVU42
 154              		.loc 1 455 21 is_stmt 0 view .LVU43
 155 0010 C3EB0311 		rsb	r1, r3, r3, lsl #4
 156 0014 03EB8103 		add	r3, r3, r1, lsl #2
 157              	.LVL19:
 158              		.loc 1 455 8 view .LVU44
 159 0018 D21A     		subs	r2, r2, r3
 160              	.LVL20:
 456:Utilities/misc/stm32_systime.c ****     divResult = DIV_APPROX_61( in );
 161              		.loc 1 456 5 is_stmt 1 view .LVU45
 162              		.loc 1 456 17 is_stmt 0 view .LVU46
 163 001a 054B     		ldr	r3, .L12
 164 001c 02FB03F3 		mul	r3, r2, r3
 165              		.loc 1 456 15 view .LVU47
 166 0020 9B0D     		lsrs	r3, r3, #22
 167              	.LVL21:
 168              	.L9:
 452:Utilities/misc/stm32_systime.c ****   {
 169              		.loc 1 452 8 is_stmt 1 view .LVU48
 170 0022 002B     		cmp	r3, #0
ARM GAS  /tmp/cclY80Kt.s 			page 12


 171 0024 F3D1     		bne	.L10
 457:Utilities/misc/stm32_systime.c ****   }
 458:Utilities/misc/stm32_systime.c ****   if( in >= 61 )
 172              		.loc 1 458 3 view .LVU49
 173              		.loc 1 458 5 is_stmt 0 view .LVU50
 174 0026 3C2A     		cmp	r2, #60
 175 0028 00D9     		bls	.L8
 459:Utilities/misc/stm32_systime.c ****   {
 460:Utilities/misc/stm32_systime.c ****     outTemp += 1;
 176              		.loc 1 460 5 is_stmt 1 view .LVU51
 177              		.loc 1 460 13 is_stmt 0 view .LVU52
 178 002a 0130     		adds	r0, r0, #1
 179              	.LVL22:
 461:Utilities/misc/stm32_systime.c ****     in -= 61;
 180              		.loc 1 461 5 is_stmt 1 view .LVU53
 462:Utilities/misc/stm32_systime.c ****   }
 463:Utilities/misc/stm32_systime.c ****   return outTemp;
 181              		.loc 1 463 3 view .LVU54
 182              	.L8:
 464:Utilities/misc/stm32_systime.c **** #endif
 465:Utilities/misc/stm32_systime.c **** }
 183              		.loc 1 465 1 is_stmt 0 view .LVU55
 184 002c 7047     		bx	lr
 185              	.L13:
 186 002e 00BF     		.align	2
 187              	.L12:
 188 0030 970C0100 		.word	68759
 189              		.cfi_endproc
 190              	.LFE14:
 192              		.section	.text.CalendarGetMonth,"ax",%progbits
 193              		.align	1
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 197              		.fpu softvfp
 199              	CalendarGetMonth:
 200              	.LVL23:
 201              	.LFB12:
 383:Utilities/misc/stm32_systime.c ****   uint32_t month;
 202              		.loc 1 383 1 is_stmt 1 view -0
 203              		.cfi_startproc
 204              		@ args = 0, pretend = 0, frame = 0
 205              		@ frame_needed = 0, uses_anonymous_args = 0
 383:Utilities/misc/stm32_systime.c ****   uint32_t month;
 206              		.loc 1 383 1 is_stmt 0 view .LVU57
 207 0000 08B5     		push	{r3, lr}
 208              	.LCFI2:
 209              		.cfi_def_cfa_offset 8
 210              		.cfi_offset 3, -8
 211              		.cfi_offset 14, -4
 384:Utilities/misc/stm32_systime.c ****   if( ( year % 4 ) == 0 )
 212              		.loc 1 384 3 is_stmt 1 view .LVU58
 385:Utilities/misc/stm32_systime.c ****   {   /*leap year*/
 213              		.loc 1 385 3 view .LVU59
 385:Utilities/misc/stm32_systime.c ****   {   /*leap year*/
 214              		.loc 1 385 5 is_stmt 0 view .LVU60
 215 0002 11F0030F 		tst	r1, #3
ARM GAS  /tmp/cclY80Kt.s 			page 13


 216 0006 13D1     		bne	.L15
 387:Utilities/misc/stm32_systime.c ****     {   // January or February
 217              		.loc 1 387 5 is_stmt 1 view .LVU61
 387:Utilities/misc/stm32_systime.c ****     {   // January or February
 218              		.loc 1 387 7 is_stmt 0 view .LVU62
 219 0008 3B28     		cmp	r0, #59
 220 000a 07D9     		bls	.L22
 392:Utilities/misc/stm32_systime.c ****     {
 221              		.loc 1 392 10 is_stmt 1 view .LVU63
 392:Utilities/misc/stm32_systime.c ****     {
 222              		.loc 1 392 12 is_stmt 0 view .LVU64
 223 000c D428     		cmp	r0, #212
 224 000e 09D8     		bhi	.L18
 394:Utilities/misc/stm32_systime.c ****     }
 225              		.loc 1 394 7 is_stmt 1 view .LVU65
 394:Utilities/misc/stm32_systime.c ****     }
 226              		.loc 1 394 37 is_stmt 0 view .LVU66
 227 0010 3C38     		subs	r0, r0, #60
 228              	.LVL24:
 394:Utilities/misc/stm32_systime.c ****     }
 229              		.loc 1 394 15 view .LVU67
 230 0012 4000     		lsls	r0, r0, #1
 231              	.LVL25:
 394:Utilities/misc/stm32_systime.c ****     }
 232              		.loc 1 394 15 view .LVU68
 233 0014 FFF7FEFF 		bl	CalendarDiv61
 234              	.LVL26:
 394:Utilities/misc/stm32_systime.c ****     }
 235              		.loc 1 394 13 view .LVU69
 236 0018 0230     		adds	r0, r0, #2
 237              	.LVL27:
 238              	.L14:
 417:Utilities/misc/stm32_systime.c **** 
 239              		.loc 1 417 1 view .LVU70
 240 001a 08BD     		pop	{r3, pc}
 241              	.LVL28:
 242              	.L22:
 390:Utilities/misc/stm32_systime.c ****     }
 243              		.loc 1 390 7 is_stmt 1 view .LVU71
 390:Utilities/misc/stm32_systime.c ****     }
 244              		.loc 1 390 15 is_stmt 0 view .LVU72
 245 001c 4000     		lsls	r0, r0, #1
 246              	.LVL29:
 390:Utilities/misc/stm32_systime.c ****     }
 247              		.loc 1 390 15 view .LVU73
 248 001e FFF7FEFF 		bl	CalendarDiv61
 249              	.LVL30:
 390:Utilities/misc/stm32_systime.c ****     }
 250              		.loc 1 390 15 view .LVU74
 251 0022 FAE7     		b	.L14
 252              	.LVL31:
 253              	.L18:
 398:Utilities/misc/stm32_systime.c ****     }
 254              		.loc 1 398 7 is_stmt 1 view .LVU75
 398:Utilities/misc/stm32_systime.c ****     }
 255              		.loc 1 398 37 is_stmt 0 view .LVU76
 256 0024 D538     		subs	r0, r0, #213
ARM GAS  /tmp/cclY80Kt.s 			page 14


 257              	.LVL32:
 398:Utilities/misc/stm32_systime.c ****     }
 258              		.loc 1 398 15 view .LVU77
 259 0026 4000     		lsls	r0, r0, #1
 260              	.LVL33:
 398:Utilities/misc/stm32_systime.c ****     }
 261              		.loc 1 398 15 view .LVU78
 262 0028 FFF7FEFF 		bl	CalendarDiv61
 263              	.LVL34:
 398:Utilities/misc/stm32_systime.c ****     }
 264              		.loc 1 398 13 view .LVU79
 265 002c 0730     		adds	r0, r0, #7
 266              	.LVL35:
 398:Utilities/misc/stm32_systime.c ****     }
 267              		.loc 1 398 13 view .LVU80
 268 002e F4E7     		b	.L14
 269              	.LVL36:
 270              	.L15:
 403:Utilities/misc/stm32_systime.c ****     {   // January or February
 271              		.loc 1 403 5 is_stmt 1 view .LVU81
 403:Utilities/misc/stm32_systime.c ****     {   // January or February
 272              		.loc 1 403 7 is_stmt 0 view .LVU82
 273 0030 3A28     		cmp	r0, #58
 274 0032 07D9     		bls	.L23
 407:Utilities/misc/stm32_systime.c ****     {
 275              		.loc 1 407 10 is_stmt 1 view .LVU83
 407:Utilities/misc/stm32_systime.c ****     {
 276              		.loc 1 407 12 is_stmt 0 view .LVU84
 277 0034 D328     		cmp	r0, #211
 278 0036 09D8     		bhi	.L20
 409:Utilities/misc/stm32_systime.c ****     }
 279              		.loc 1 409 7 is_stmt 1 view .LVU85
 409:Utilities/misc/stm32_systime.c ****     }
 280              		.loc 1 409 37 is_stmt 0 view .LVU86
 281 0038 3B38     		subs	r0, r0, #59
 282              	.LVL37:
 409:Utilities/misc/stm32_systime.c ****     }
 283              		.loc 1 409 15 view .LVU87
 284 003a 4000     		lsls	r0, r0, #1
 285              	.LVL38:
 409:Utilities/misc/stm32_systime.c ****     }
 286              		.loc 1 409 15 view .LVU88
 287 003c FFF7FEFF 		bl	CalendarDiv61
 288              	.LVL39:
 409:Utilities/misc/stm32_systime.c ****     }
 289              		.loc 1 409 13 view .LVU89
 290 0040 0230     		adds	r0, r0, #2
 291              	.LVL40:
 409:Utilities/misc/stm32_systime.c ****     }
 292              		.loc 1 409 13 view .LVU90
 293 0042 EAE7     		b	.L14
 294              	.LVL41:
 295              	.L23:
 405:Utilities/misc/stm32_systime.c ****     }
 296              		.loc 1 405 7 is_stmt 1 view .LVU91
 405:Utilities/misc/stm32_systime.c ****     }
 297              		.loc 1 405 15 is_stmt 0 view .LVU92
ARM GAS  /tmp/cclY80Kt.s 			page 15


 298 0044 4000     		lsls	r0, r0, #1
 299              	.LVL42:
 405:Utilities/misc/stm32_systime.c ****     }
 300              		.loc 1 405 15 view .LVU93
 301 0046 FFF7FEFF 		bl	CalendarDiv61
 302              	.LVL43:
 405:Utilities/misc/stm32_systime.c ****     }
 303              		.loc 1 405 15 view .LVU94
 304 004a E6E7     		b	.L14
 305              	.LVL44:
 306              	.L20:
 413:Utilities/misc/stm32_systime.c ****     }
 307              		.loc 1 413 7 is_stmt 1 view .LVU95
 413:Utilities/misc/stm32_systime.c ****     }
 308              		.loc 1 413 37 is_stmt 0 view .LVU96
 309 004c D438     		subs	r0, r0, #212
 310              	.LVL45:
 413:Utilities/misc/stm32_systime.c ****     }
 311              		.loc 1 413 15 view .LVU97
 312 004e 4000     		lsls	r0, r0, #1
 313              	.LVL46:
 413:Utilities/misc/stm32_systime.c ****     }
 314              		.loc 1 413 15 view .LVU98
 315 0050 FFF7FEFF 		bl	CalendarDiv61
 316              	.LVL47:
 413:Utilities/misc/stm32_systime.c ****     }
 317              		.loc 1 413 13 view .LVU99
 318 0054 0730     		adds	r0, r0, #7
 319              	.LVL48:
 416:Utilities/misc/stm32_systime.c **** }
 320              		.loc 1 416 3 is_stmt 1 view .LVU100
 416:Utilities/misc/stm32_systime.c **** }
 321              		.loc 1 416 10 is_stmt 0 view .LVU101
 322 0056 E0E7     		b	.L14
 323              		.cfi_endproc
 324              	.LFE12:
 326              		.section	.text.CalendarDiv60,"ax",%progbits
 327              		.align	1
 328              		.syntax unified
 329              		.thumb
 330              		.thumb_func
 331              		.fpu softvfp
 333              	CalendarDiv60:
 334              	.LVL49:
 335              	.LFB15:
 466:Utilities/misc/stm32_systime.c **** 
 467:Utilities/misc/stm32_systime.c **** static void CalendarDiv60( uint32_t in, uint32_t* out, uint32_t* remainder )
 468:Utilities/misc/stm32_systime.c **** {
 336              		.loc 1 468 1 is_stmt 1 view -0
 337              		.cfi_startproc
 338              		@ args = 0, pretend = 0, frame = 0
 339              		@ frame_needed = 0, uses_anonymous_args = 0
 340              		@ link register save eliminated.
 341              		.loc 1 468 1 is_stmt 0 view .LVU103
 342 0000 10B4     		push	{r4}
 343              	.LCFI3:
 344              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/cclY80Kt.s 			page 16


 345              		.cfi_offset 4, -4
 469:Utilities/misc/stm32_systime.c **** #if 0
 470:Utilities/misc/stm32_systime.c ****   *remainder = in % 60;
 471:Utilities/misc/stm32_systime.c ****   *out     = in / 60;
 472:Utilities/misc/stm32_systime.c **** #else
 473:Utilities/misc/stm32_systime.c ****   uint32_t outTemp = 0;
 346              		.loc 1 473 3 is_stmt 1 view .LVU104
 347              	.LVL50:
 474:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_60( in );
 348              		.loc 1 474 3 view .LVU105
 349              		.loc 1 474 24 is_stmt 0 view .LVU106
 350 0002 44F24443 		movw	r3, #17476
 351 0006 00FB03F3 		mul	r3, r0, r3
 352              		.loc 1 474 12 view .LVU107
 353 000a 1B0D     		lsrs	r3, r3, #20
 354              	.LVL51:
 475:Utilities/misc/stm32_systime.c **** 
 476:Utilities/misc/stm32_systime.c ****   while( divResult >=1 )
 355              		.loc 1 476 3 is_stmt 1 view .LVU108
 473:Utilities/misc/stm32_systime.c ****   uint32_t divResult = DIV_APPROX_60( in );
 356              		.loc 1 473 12 is_stmt 0 view .LVU109
 357 000c 0024     		movs	r4, #0
 358              		.loc 1 476 8 view .LVU110
 359 000e 09E0     		b	.L25
 360              	.LVL52:
 361              	.L26:
 477:Utilities/misc/stm32_systime.c ****   {
 478:Utilities/misc/stm32_systime.c ****     outTemp += divResult;
 362              		.loc 1 478 5 is_stmt 1 view .LVU111
 363              		.loc 1 478 13 is_stmt 0 view .LVU112
 364 0010 1C44     		add	r4, r4, r3
 365              	.LVL53:
 479:Utilities/misc/stm32_systime.c ****     in -= divResult * 60;
 366              		.loc 1 479 5 is_stmt 1 view .LVU113
 367              		.loc 1 479 21 is_stmt 0 view .LVU114
 368 0012 C3EB0313 		rsb	r3, r3, r3, lsl #4
 369              	.LVL54:
 370              		.loc 1 479 8 view .LVU115
 371 0016 A0EB8300 		sub	r0, r0, r3, lsl #2
 372              	.LVL55:
 480:Utilities/misc/stm32_systime.c ****     divResult = DIV_APPROX_60( in );
 373              		.loc 1 480 5 is_stmt 1 view .LVU116
 374              		.loc 1 480 17 is_stmt 0 view .LVU117
 375 001a 44F24443 		movw	r3, #17476
 376 001e 00FB03F3 		mul	r3, r0, r3
 377              		.loc 1 480 15 view .LVU118
 378 0022 1B0D     		lsrs	r3, r3, #20
 379              	.LVL56:
 380              	.L25:
 476:Utilities/misc/stm32_systime.c ****   {
 381              		.loc 1 476 8 is_stmt 1 view .LVU119
 382 0024 002B     		cmp	r3, #0
 383 0026 F3D1     		bne	.L26
 481:Utilities/misc/stm32_systime.c ****   }
 482:Utilities/misc/stm32_systime.c ****   if( in >= 60 )
 384              		.loc 1 482 3 view .LVU120
 385              		.loc 1 482 5 is_stmt 0 view .LVU121
ARM GAS  /tmp/cclY80Kt.s 			page 17


 386 0028 3B28     		cmp	r0, #59
 387 002a 01D9     		bls	.L27
 483:Utilities/misc/stm32_systime.c ****   {
 484:Utilities/misc/stm32_systime.c ****     outTemp += 1;
 388              		.loc 1 484 5 is_stmt 1 view .LVU122
 389              		.loc 1 484 13 is_stmt 0 view .LVU123
 390 002c 0134     		adds	r4, r4, #1
 391              	.LVL57:
 485:Utilities/misc/stm32_systime.c ****     in -= 60;
 392              		.loc 1 485 5 is_stmt 1 view .LVU124
 393              		.loc 1 485 8 is_stmt 0 view .LVU125
 394 002e 3C38     		subs	r0, r0, #60
 395              	.LVL58:
 396              	.L27:
 486:Utilities/misc/stm32_systime.c ****   }
 487:Utilities/misc/stm32_systime.c ****   *remainder = in;
 397              		.loc 1 487 3 is_stmt 1 view .LVU126
 398              		.loc 1 487 14 is_stmt 0 view .LVU127
 399 0030 1060     		str	r0, [r2]
 488:Utilities/misc/stm32_systime.c ****   *out = outTemp;
 400              		.loc 1 488 3 is_stmt 1 view .LVU128
 401              		.loc 1 488 8 is_stmt 0 view .LVU129
 402 0032 0C60     		str	r4, [r1]
 489:Utilities/misc/stm32_systime.c **** #endif
 490:Utilities/misc/stm32_systime.c **** }
 403              		.loc 1 490 1 view .LVU130
 404 0034 10BC     		pop	{r4}
 405              	.LCFI4:
 406              		.cfi_restore 4
 407              		.cfi_def_cfa_offset 0
 408              	.LVL59:
 409              		.loc 1 490 1 view .LVU131
 410 0036 7047     		bx	lr
 411              		.cfi_endproc
 412              	.LFE15:
 414              		.section	.text.SysTimeAdd,"ax",%progbits
 415              		.align	1
 416              		.global	SysTimeAdd
 417              		.syntax unified
 418              		.thumb
 419              		.thumb_func
 420              		.fpu softvfp
 422              	SysTimeAdd:
 423              	.LVL60:
 424              	.LFB3:
 201:Utilities/misc/stm32_systime.c ****   SysTime_t c =  { .Seconds = 0, .SubSeconds = 0 };
 425              		.loc 1 201 1 is_stmt 1 view -0
 426              		.cfi_startproc
 427              		@ args = 12, pretend = 8, frame = 8
 428              		@ frame_needed = 0, uses_anonymous_args = 0
 429              		@ link register save eliminated.
 201:Utilities/misc/stm32_systime.c ****   SysTime_t c =  { .Seconds = 0, .SubSeconds = 0 };
 430              		.loc 1 201 1 is_stmt 0 view .LVU133
 431 0000 82B0     		sub	sp, sp, #8
 432              	.LCFI5:
 433              		.cfi_def_cfa_offset 8
 434 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/cclY80Kt.s 			page 18


 435              	.LCFI6:
 436              		.cfi_def_cfa_offset 16
 437 0004 0DF1080C 		add	ip, sp, #8
 438 0008 0CE90600 		stmdb	ip, {r1, r2}
 439 000c 0393     		str	r3, [sp, #12]
 202:Utilities/misc/stm32_systime.c **** 
 440              		.loc 1 202 3 is_stmt 1 view .LVU134
 202:Utilities/misc/stm32_systime.c **** 
 441              		.loc 1 202 13 is_stmt 0 view .LVU135
 442 000e 0022     		movs	r2, #0
 443 0010 0260     		str	r2, [r0]
 444 0012 8280     		strh	r2, [r0, #4]	@ movhi
 204:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds + b.SubSeconds;
 445              		.loc 1 204 3 is_stmt 1 view .LVU136
 204:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds + b.SubSeconds;
 446              		.loc 1 204 25 is_stmt 0 view .LVU137
 447 0014 0B44     		add	r3, r3, r1
 204:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds + b.SubSeconds;
 448              		.loc 1 204 13 view .LVU138
 449 0016 0360     		str	r3, [r0]
 205:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 450              		.loc 1 205 3 is_stmt 1 view .LVU139
 205:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 451              		.loc 1 205 19 is_stmt 0 view .LVU140
 452 0018 BDF80420 		ldrh	r2, [sp, #4]
 205:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 453              		.loc 1 205 34 view .LVU141
 454 001c BDF81010 		ldrh	r1, [sp, #16]
 205:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 455              		.loc 1 205 31 view .LVU142
 456 0020 0A44     		add	r2, r2, r1
 457 0022 91B2     		uxth	r1, r2
 458 0024 12B2     		sxth	r2, r2
 205:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds >= 1000 )
 459              		.loc 1 205 16 view .LVU143
 460 0026 8280     		strh	r2, [r0, #4]	@ movhi
 206:Utilities/misc/stm32_systime.c ****   {
 461              		.loc 1 206 3 is_stmt 1 view .LVU144
 206:Utilities/misc/stm32_systime.c ****   {
 462              		.loc 1 206 5 is_stmt 0 view .LVU145
 463 0028 B2F57A7F 		cmp	r2, #1000
 464 002c 04DB     		blt	.L29
 208:Utilities/misc/stm32_systime.c ****     c.SubSeconds -= 1000;
 465              		.loc 1 208 5 is_stmt 1 view .LVU146
 208:Utilities/misc/stm32_systime.c ****     c.SubSeconds -= 1000;
 466              		.loc 1 208 14 is_stmt 0 view .LVU147
 467 002e 0133     		adds	r3, r3, #1
 468 0030 0360     		str	r3, [r0]
 209:Utilities/misc/stm32_systime.c ****   }
 469              		.loc 1 209 5 is_stmt 1 view .LVU148
 209:Utilities/misc/stm32_systime.c ****   }
 470              		.loc 1 209 18 is_stmt 0 view .LVU149
 471 0032 A1F57A71 		sub	r1, r1, #1000
 472 0036 8180     		strh	r1, [r0, #4]	@ movhi
 211:Utilities/misc/stm32_systime.c **** }
 473              		.loc 1 211 3 is_stmt 1 view .LVU150
 474              	.L29:
ARM GAS  /tmp/cclY80Kt.s 			page 19


 212:Utilities/misc/stm32_systime.c **** 
 475              		.loc 1 212 1 is_stmt 0 view .LVU151
 476 0038 02B0     		add	sp, sp, #8
 477              	.LCFI7:
 478              		.cfi_def_cfa_offset 8
 479              		@ sp needed
 480 003a 02B0     		add	sp, sp, #8
 481              	.LCFI8:
 482              		.cfi_def_cfa_offset 0
 483 003c 7047     		bx	lr
 484              		.cfi_endproc
 485              	.LFE3:
 487              		.section	.text.SysTimeSub,"ax",%progbits
 488              		.align	1
 489              		.global	SysTimeSub
 490              		.syntax unified
 491              		.thumb
 492              		.thumb_func
 493              		.fpu softvfp
 495              	SysTimeSub:
 496              	.LVL61:
 497              	.LFB4:
 215:Utilities/misc/stm32_systime.c ****   SysTime_t c = { .Seconds = 0, .SubSeconds = 0 };
 498              		.loc 1 215 1 is_stmt 1 view -0
 499              		.cfi_startproc
 500              		@ args = 12, pretend = 8, frame = 8
 501              		@ frame_needed = 0, uses_anonymous_args = 0
 502              		@ link register save eliminated.
 215:Utilities/misc/stm32_systime.c ****   SysTime_t c = { .Seconds = 0, .SubSeconds = 0 };
 503              		.loc 1 215 1 is_stmt 0 view .LVU153
 504 0000 82B0     		sub	sp, sp, #8
 505              	.LCFI9:
 506              		.cfi_def_cfa_offset 8
 507 0002 82B0     		sub	sp, sp, #8
 508              	.LCFI10:
 509              		.cfi_def_cfa_offset 16
 510 0004 0DF1080C 		add	ip, sp, #8
 511 0008 0CE90600 		stmdb	ip, {r1, r2}
 512 000c 0393     		str	r3, [sp, #12]
 216:Utilities/misc/stm32_systime.c **** 
 513              		.loc 1 216 3 is_stmt 1 view .LVU154
 216:Utilities/misc/stm32_systime.c **** 
 514              		.loc 1 216 13 is_stmt 0 view .LVU155
 515 000e 0022     		movs	r2, #0
 516 0010 0260     		str	r2, [r0]
 517 0012 8280     		strh	r2, [r0, #4]	@ movhi
 218:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds - b.SubSeconds;
 518              		.loc 1 218 3 is_stmt 1 view .LVU156
 218:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds - b.SubSeconds;
 519              		.loc 1 218 25 is_stmt 0 view .LVU157
 520 0014 CB1A     		subs	r3, r1, r3
 218:Utilities/misc/stm32_systime.c ****   c.SubSeconds = a.SubSeconds - b.SubSeconds;
 521              		.loc 1 218 13 view .LVU158
 522 0016 0360     		str	r3, [r0]
 219:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
 523              		.loc 1 219 3 is_stmt 1 view .LVU159
 219:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
ARM GAS  /tmp/cclY80Kt.s 			page 20


 524              		.loc 1 219 19 is_stmt 0 view .LVU160
 525 0018 BDF80420 		ldrh	r2, [sp, #4]
 219:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
 526              		.loc 1 219 34 view .LVU161
 527 001c BDF81010 		ldrh	r1, [sp, #16]
 219:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
 528              		.loc 1 219 31 view .LVU162
 529 0020 521A     		subs	r2, r2, r1
 530 0022 91B2     		uxth	r1, r2
 531 0024 12B2     		sxth	r2, r2
 219:Utilities/misc/stm32_systime.c ****   if( c.SubSeconds < 0 )
 532              		.loc 1 219 16 view .LVU163
 533 0026 8280     		strh	r2, [r0, #4]	@ movhi
 220:Utilities/misc/stm32_systime.c ****   {
 534              		.loc 1 220 3 is_stmt 1 view .LVU164
 220:Utilities/misc/stm32_systime.c ****   {
 535              		.loc 1 220 5 is_stmt 0 view .LVU165
 536 0028 002A     		cmp	r2, #0
 537 002a 02DB     		blt	.L35
 538              	.L32:
 226:Utilities/misc/stm32_systime.c **** 
 539              		.loc 1 226 1 view .LVU166
 540 002c 02B0     		add	sp, sp, #8
 541              	.LCFI11:
 542              		.cfi_remember_state
 543              		.cfi_def_cfa_offset 8
 544              		@ sp needed
 545 002e 02B0     		add	sp, sp, #8
 546              	.LCFI12:
 547              		.cfi_def_cfa_offset 0
 548 0030 7047     		bx	lr
 549              	.L35:
 550              	.LCFI13:
 551              		.cfi_restore_state
 222:Utilities/misc/stm32_systime.c ****     c.SubSeconds += 1000;
 552              		.loc 1 222 5 is_stmt 1 view .LVU167
 222:Utilities/misc/stm32_systime.c ****     c.SubSeconds += 1000;
 553              		.loc 1 222 14 is_stmt 0 view .LVU168
 554 0032 013B     		subs	r3, r3, #1
 555 0034 0360     		str	r3, [r0]
 223:Utilities/misc/stm32_systime.c ****   }
 556              		.loc 1 223 5 is_stmt 1 view .LVU169
 223:Utilities/misc/stm32_systime.c ****   }
 557              		.loc 1 223 18 is_stmt 0 view .LVU170
 558 0036 01F57A71 		add	r1, r1, #1000
 559 003a 8180     		strh	r1, [r0, #4]	@ movhi
 225:Utilities/misc/stm32_systime.c **** }
 560              		.loc 1 225 3 is_stmt 1 view .LVU171
 225:Utilities/misc/stm32_systime.c **** }
 561              		.loc 1 225 10 is_stmt 0 view .LVU172
 562 003c F6E7     		b	.L32
 563              		.cfi_endproc
 564              	.LFE4:
 566              		.section	.text.SysTimeSet,"ax",%progbits
 567              		.align	1
 568              		.global	SysTimeSet
 569              		.syntax unified
ARM GAS  /tmp/cclY80Kt.s 			page 21


 570              		.thumb
 571              		.thumb_func
 572              		.fpu softvfp
 574              	SysTimeSet:
 575              	.LFB5:
 229:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 576              		.loc 1 229 1 is_stmt 1 view -0
 577              		.cfi_startproc
 578              		@ args = 0, pretend = 0, frame = 24
 579              		@ frame_needed = 0, uses_anonymous_args = 0
 580 0000 30B5     		push	{r4, r5, lr}
 581              	.LCFI14:
 582              		.cfi_def_cfa_offset 12
 583              		.cfi_offset 4, -12
 584              		.cfi_offset 5, -8
 585              		.cfi_offset 14, -4
 586 0002 89B0     		sub	sp, sp, #36
 587              	.LCFI15:
 588              		.cfi_def_cfa_offset 48
 589 0004 02AC     		add	r4, sp, #8
 590 0006 84E80300 		stm	r4, {r0, r1}
 230:Utilities/misc/stm32_systime.c ****   
 591              		.loc 1 230 3 view .LVU174
 232:Utilities/misc/stm32_systime.c **** 
 592              		.loc 1 232 3 view .LVU175
 232:Utilities/misc/stm32_systime.c **** 
 593              		.loc 1 232 13 is_stmt 0 view .LVU176
 594 000a 0023     		movs	r3, #0
 595 000c 0493     		str	r3, [sp, #16]
 596 000e ADF81430 		strh	r3, [sp, #20]	@ movhi
 234:Utilities/misc/stm32_systime.c **** 
 597              		.loc 1 234 3 is_stmt 1 view .LVU177
 234:Utilities/misc/stm32_systime.c **** 
 598              		.loc 1 234 43 is_stmt 0 view .LVU178
 599 0012 0B4D     		ldr	r5, .L38
 600 0014 2B69     		ldr	r3, [r5, #16]
 234:Utilities/misc/stm32_systime.c **** 
 601              		.loc 1 234 26 view .LVU179
 602 0016 05A8     		add	r0, sp, #20
 603 0018 9847     		blx	r3
 604              	.LVL62:
 605 001a 0346     		mov	r3, r0
 234:Utilities/misc/stm32_systime.c **** 
 606              		.loc 1 234 24 view .LVU180
 607 001c 0490     		str	r0, [sp, #16]
 237:Utilities/misc/stm32_systime.c **** 
 608              		.loc 1 237 3 is_stmt 1 view .LVU181
 237:Utilities/misc/stm32_systime.c **** 
 609              		.loc 1 237 15 is_stmt 0 view .LVU182
 610 001e 059A     		ldr	r2, [sp, #20]
 611 0020 0092     		str	r2, [sp]
 612 0022 94E80600 		ldm	r4, {r1, r2}
 613 0026 06A8     		add	r0, sp, #24
 614 0028 FFF7FEFF 		bl	SysTimeSub
 615              	.LVL63:
 239:Utilities/misc/stm32_systime.c ****   UTIL_SYSTIMDriver.BKUPWrite_SubSeconds( ( uint32_t ) DeltaTime.SubSeconds );
 616              		.loc 1 239 3 is_stmt 1 view .LVU183
ARM GAS  /tmp/cclY80Kt.s 			page 22


 239:Utilities/misc/stm32_systime.c ****   UTIL_SYSTIMDriver.BKUPWrite_SubSeconds( ( uint32_t ) DeltaTime.SubSeconds );
 617              		.loc 1 239 20 is_stmt 0 view .LVU184
 618 002c 2B68     		ldr	r3, [r5]
 239:Utilities/misc/stm32_systime.c ****   UTIL_SYSTIMDriver.BKUPWrite_SubSeconds( ( uint32_t ) DeltaTime.SubSeconds );
 619              		.loc 1 239 3 view .LVU185
 620 002e 0698     		ldr	r0, [sp, #24]
 621 0030 9847     		blx	r3
 622              	.LVL64:
 240:Utilities/misc/stm32_systime.c **** }
 623              		.loc 1 240 3 is_stmt 1 view .LVU186
 240:Utilities/misc/stm32_systime.c **** }
 624              		.loc 1 240 20 is_stmt 0 view .LVU187
 625 0032 AB68     		ldr	r3, [r5, #8]
 240:Utilities/misc/stm32_systime.c **** }
 626              		.loc 1 240 3 view .LVU188
 627 0034 BDF91C00 		ldrsh	r0, [sp, #28]
 628 0038 9847     		blx	r3
 629              	.LVL65:
 241:Utilities/misc/stm32_systime.c **** 
 630              		.loc 1 241 1 view .LVU189
 631 003a 09B0     		add	sp, sp, #36
 632              	.LCFI16:
 633              		.cfi_def_cfa_offset 12
 634              		@ sp needed
 635 003c 30BD     		pop	{r4, r5, pc}
 636              	.L39:
 637 003e 00BF     		.align	2
 638              	.L38:
 639 0040 00000000 		.word	UTIL_SYSTIMDriver
 640              		.cfi_endproc
 641              	.LFE5:
 643              		.section	.text.SysTimeGet,"ax",%progbits
 644              		.align	1
 645              		.global	SysTimeGet
 646              		.syntax unified
 647              		.thumb
 648              		.thumb_func
 649              		.fpu softvfp
 651              	SysTimeGet:
 652              	.LVL66:
 653              	.LFB6:
 244:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 654              		.loc 1 244 1 is_stmt 1 view -0
 655              		.cfi_startproc
 656              		@ args = 0, pretend = 0, frame = 16
 657              		@ frame_needed = 0, uses_anonymous_args = 0
 244:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 658              		.loc 1 244 1 is_stmt 0 view .LVU191
 659 0000 30B5     		push	{r4, r5, lr}
 660              	.LCFI17:
 661              		.cfi_def_cfa_offset 12
 662              		.cfi_offset 4, -12
 663              		.cfi_offset 5, -8
 664              		.cfi_offset 14, -4
 665 0002 87B0     		sub	sp, sp, #28
 666              	.LCFI18:
 667              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/cclY80Kt.s 			page 23


 668 0004 0446     		mov	r4, r0
 245:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = 0, .SubSeconds = 0 };
 669              		.loc 1 245 3 is_stmt 1 view .LVU192
 245:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = 0, .SubSeconds = 0 };
 670              		.loc 1 245 13 is_stmt 0 view .LVU193
 671 0006 0023     		movs	r3, #0
 672 0008 0493     		str	r3, [sp, #16]
 673 000a ADF81430 		strh	r3, [sp, #20]	@ movhi
 246:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 674              		.loc 1 246 3 is_stmt 1 view .LVU194
 246:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 675              		.loc 1 246 13 is_stmt 0 view .LVU195
 676 000e 0360     		str	r3, [r0]
 677 0010 8380     		strh	r3, [r0, #4]	@ movhi
 247:Utilities/misc/stm32_systime.c **** 
 678              		.loc 1 247 3 is_stmt 1 view .LVU196
 249:Utilities/misc/stm32_systime.c **** 
 679              		.loc 1 249 3 view .LVU197
 249:Utilities/misc/stm32_systime.c **** 
 680              		.loc 1 249 43 is_stmt 0 view .LVU198
 681 0012 0B4D     		ldr	r5, .L42
 682 0014 2B69     		ldr	r3, [r5, #16]
 249:Utilities/misc/stm32_systime.c **** 
 683              		.loc 1 249 26 view .LVU199
 684 0016 05A8     		add	r0, sp, #20
 685              	.LVL67:
 249:Utilities/misc/stm32_systime.c **** 
 686              		.loc 1 249 26 view .LVU200
 687 0018 9847     		blx	r3
 688              	.LVL68:
 249:Utilities/misc/stm32_systime.c **** 
 689              		.loc 1 249 24 view .LVU201
 690 001a 0490     		str	r0, [sp, #16]
 251:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 691              		.loc 1 251 3 is_stmt 1 view .LVU202
 251:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 692              		.loc 1 251 52 is_stmt 0 view .LVU203
 693 001c EB68     		ldr	r3, [r5, #12]
 251:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 694              		.loc 1 251 35 view .LVU204
 695 001e 9847     		blx	r3
 696              	.LVL69:
 251:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 697              		.loc 1 251 24 view .LVU205
 698 0020 ADF80C00 		strh	r0, [sp, #12]	@ movhi
 252:Utilities/misc/stm32_systime.c **** 
 699              		.loc 1 252 3 is_stmt 1 view .LVU206
 252:Utilities/misc/stm32_systime.c **** 
 700              		.loc 1 252 40 is_stmt 0 view .LVU207
 701 0024 6B68     		ldr	r3, [r5, #4]
 252:Utilities/misc/stm32_systime.c **** 
 702              		.loc 1 252 23 view .LVU208
 703 0026 9847     		blx	r3
 704              	.LVL70:
 252:Utilities/misc/stm32_systime.c **** 
 705              		.loc 1 252 21 view .LVU209
 706 0028 0290     		str	r0, [sp, #8]
ARM GAS  /tmp/cclY80Kt.s 			page 24


 254:Utilities/misc/stm32_systime.c **** 
 707              		.loc 1 254 3 is_stmt 1 view .LVU210
 254:Utilities/misc/stm32_systime.c **** 
 708              		.loc 1 254 13 is_stmt 0 view .LVU211
 709 002a 059B     		ldr	r3, [sp, #20]
 710 002c 0093     		str	r3, [sp]
 711 002e 049B     		ldr	r3, [sp, #16]
 712 0030 02AA     		add	r2, sp, #8
 713 0032 06CA     		ldm	r2, {r1, r2}
 714 0034 2046     		mov	r0, r4
 715 0036 FFF7FEFF 		bl	SysTimeAdd
 716              	.LVL71:
 256:Utilities/misc/stm32_systime.c **** }
 717              		.loc 1 256 3 is_stmt 1 view .LVU212
 257:Utilities/misc/stm32_systime.c **** 
 718              		.loc 1 257 1 is_stmt 0 view .LVU213
 719 003a 2046     		mov	r0, r4
 720 003c 07B0     		add	sp, sp, #28
 721              	.LCFI19:
 722              		.cfi_def_cfa_offset 12
 723              		@ sp needed
 724 003e 30BD     		pop	{r4, r5, pc}
 725              	.LVL72:
 726              	.L43:
 257:Utilities/misc/stm32_systime.c **** 
 727              		.loc 1 257 1 view .LVU214
 728              		.align	2
 729              	.L42:
 730 0040 00000000 		.word	UTIL_SYSTIMDriver
 731              		.cfi_endproc
 732              	.LFE6:
 734              		.section	.text.SysTimeGetMcuTime,"ax",%progbits
 735              		.align	1
 736              		.global	SysTimeGetMcuTime
 737              		.syntax unified
 738              		.thumb
 739              		.thumb_func
 740              		.fpu softvfp
 742              	SysTimeGetMcuTime:
 743              	.LVL73:
 744              	.LFB7:
 261:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 745              		.loc 1 261 1 is_stmt 1 view -0
 746              		.cfi_startproc
 747              		@ args = 0, pretend = 0, frame = 8
 748              		@ frame_needed = 0, uses_anonymous_args = 0
 261:Utilities/misc/stm32_systime.c ****   SysTime_t calendarTime = { .Seconds = 0, .SubSeconds = 0 };
 749              		.loc 1 261 1 is_stmt 0 view .LVU216
 750 0000 30B5     		push	{r4, r5, lr}
 751              	.LCFI20:
 752              		.cfi_def_cfa_offset 12
 753              		.cfi_offset 4, -12
 754              		.cfi_offset 5, -8
 755              		.cfi_offset 14, -4
 756 0002 83B0     		sub	sp, sp, #12
 757              	.LCFI21:
 758              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cclY80Kt.s 			page 25


 759 0004 0446     		mov	r4, r0
 262:Utilities/misc/stm32_systime.c **** 
 760              		.loc 1 262 3 is_stmt 1 view .LVU217
 262:Utilities/misc/stm32_systime.c **** 
 761              		.loc 1 262 13 is_stmt 0 view .LVU218
 762 0006 0023     		movs	r3, #0
 763 0008 0093     		str	r3, [sp]
 764 000a ADF80430 		strh	r3, [sp, #4]	@ movhi
 264:Utilities/misc/stm32_systime.c ****   
 765              		.loc 1 264 3 is_stmt 1 view .LVU219
 264:Utilities/misc/stm32_systime.c ****   
 766              		.loc 1 264 43 is_stmt 0 view .LVU220
 767 000e 064B     		ldr	r3, .L46
 768 0010 1B69     		ldr	r3, [r3, #16]
 264:Utilities/misc/stm32_systime.c ****   
 769              		.loc 1 264 26 view .LVU221
 770 0012 6D46     		mov	r5, sp
 771 0014 01A8     		add	r0, sp, #4
 772              	.LVL74:
 264:Utilities/misc/stm32_systime.c ****   
 773              		.loc 1 264 26 view .LVU222
 774 0016 9847     		blx	r3
 775              	.LVL75:
 264:Utilities/misc/stm32_systime.c ****   
 776              		.loc 1 264 24 view .LVU223
 777 0018 0090     		str	r0, [sp]
 266:Utilities/misc/stm32_systime.c **** }
 778              		.loc 1 266 3 is_stmt 1 view .LVU224
 266:Utilities/misc/stm32_systime.c **** }
 779              		.loc 1 266 10 is_stmt 0 view .LVU225
 780 001a 95E80300 		ldm	r5, {r0, r1}
 781 001e 84E80300 		stm	r4, {r0, r1}
 267:Utilities/misc/stm32_systime.c **** 
 782              		.loc 1 267 1 view .LVU226
 783 0022 2046     		mov	r0, r4
 784 0024 03B0     		add	sp, sp, #12
 785              	.LCFI22:
 786              		.cfi_def_cfa_offset 12
 787              		@ sp needed
 788 0026 30BD     		pop	{r4, r5, pc}
 789              	.LVL76:
 790              	.L47:
 267:Utilities/misc/stm32_systime.c **** 
 791              		.loc 1 267 1 view .LVU227
 792              		.align	2
 793              	.L46:
 794 0028 00000000 		.word	UTIL_SYSTIMDriver
 795              		.cfi_endproc
 796              	.LFE7:
 798              		.section	.text.SysTimeToMs,"ax",%progbits
 799              		.align	1
 800              		.global	SysTimeToMs
 801              		.syntax unified
 802              		.thumb
 803              		.thumb_func
 804              		.fpu softvfp
 806              	SysTimeToMs:
ARM GAS  /tmp/cclY80Kt.s 			page 26


 807              	.LFB8:
 270:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime;
 808              		.loc 1 270 1 is_stmt 1 view -0
 809              		.cfi_startproc
 810              		@ args = 0, pretend = 0, frame = 24
 811              		@ frame_needed = 0, uses_anonymous_args = 0
 812 0000 30B5     		push	{r4, r5, lr}
 813              	.LCFI23:
 814              		.cfi_def_cfa_offset 12
 815              		.cfi_offset 4, -12
 816              		.cfi_offset 5, -8
 817              		.cfi_offset 14, -4
 818 0002 89B0     		sub	sp, sp, #36
 819              	.LCFI24:
 820              		.cfi_def_cfa_offset 48
 821 0004 02AC     		add	r4, sp, #8
 822 0006 84E80300 		stm	r4, {r0, r1}
 271:Utilities/misc/stm32_systime.c ****   DeltaTime.SubSeconds = (int16_t)UTIL_SYSTIMDriver.BKUPRead_SubSeconds();
 823              		.loc 1 271 3 view .LVU229
 272:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 824              		.loc 1 272 3 view .LVU230
 272:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 825              		.loc 1 272 52 is_stmt 0 view .LVU231
 826 000a 0C4D     		ldr	r5, .L50
 827 000c EB68     		ldr	r3, [r5, #12]
 272:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 828              		.loc 1 272 35 view .LVU232
 829 000e 9847     		blx	r3
 830              	.LVL77:
 272:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 831              		.loc 1 272 24 view .LVU233
 832 0010 ADF81C00 		strh	r0, [sp, #28]	@ movhi
 273:Utilities/misc/stm32_systime.c ****   
 833              		.loc 1 273 3 is_stmt 1 view .LVU234
 273:Utilities/misc/stm32_systime.c ****   
 834              		.loc 1 273 40 is_stmt 0 view .LVU235
 835 0014 6B68     		ldr	r3, [r5, #4]
 273:Utilities/misc/stm32_systime.c ****   
 836              		.loc 1 273 23 view .LVU236
 837 0016 9847     		blx	r3
 838              	.LVL78:
 839 0018 0346     		mov	r3, r0
 273:Utilities/misc/stm32_systime.c ****   
 840              		.loc 1 273 21 view .LVU237
 841 001a 0690     		str	r0, [sp, #24]
 275:Utilities/misc/stm32_systime.c ****   return calendarTime.Seconds * 1000 + calendarTime.SubSeconds;
 842              		.loc 1 275 3 is_stmt 1 view .LVU238
 275:Utilities/misc/stm32_systime.c ****   return calendarTime.Seconds * 1000 + calendarTime.SubSeconds;
 843              		.loc 1 275 28 is_stmt 0 view .LVU239
 844 001c 079A     		ldr	r2, [sp, #28]
 845 001e 0092     		str	r2, [sp]
 846 0020 94E80600 		ldm	r4, {r1, r2}
 847 0024 04A8     		add	r0, sp, #16
 848 0026 FFF7FEFF 		bl	SysTimeSub
 849              	.LVL79:
 276:Utilities/misc/stm32_systime.c **** }
 850              		.loc 1 276 3 is_stmt 1 view .LVU240
ARM GAS  /tmp/cclY80Kt.s 			page 27


 276:Utilities/misc/stm32_systime.c **** }
 851              		.loc 1 276 52 is_stmt 0 view .LVU241
 852 002a BDF91430 		ldrsh	r3, [sp, #20]
 277:Utilities/misc/stm32_systime.c **** 
 853              		.loc 1 277 1 view .LVU242
 854 002e 049A     		ldr	r2, [sp, #16]
 855 0030 4FF47A70 		mov	r0, #1000
 856 0034 00FB0230 		mla	r0, r0, r2, r3
 857 0038 09B0     		add	sp, sp, #36
 858              	.LCFI25:
 859              		.cfi_def_cfa_offset 12
 860              		@ sp needed
 861 003a 30BD     		pop	{r4, r5, pc}
 862              	.L51:
 863              		.align	2
 864              	.L50:
 865 003c 00000000 		.word	UTIL_SYSTIMDriver
 866              		.cfi_endproc
 867              	.LFE8:
 869              		.section	.text.SysTimeFromMs,"ax",%progbits
 870              		.align	1
 871              		.global	SysTimeFromMs
 872              		.syntax unified
 873              		.thumb
 874              		.thumb_func
 875              		.fpu softvfp
 877              	SysTimeFromMs:
 878              	.LVL80:
 879              	.LFB9:
 280:Utilities/misc/stm32_systime.c ****   uint32_t seconds = timeMs / 1000;
 880              		.loc 1 280 1 is_stmt 1 view -0
 881              		.cfi_startproc
 882              		@ args = 0, pretend = 0, frame = 16
 883              		@ frame_needed = 0, uses_anonymous_args = 0
 280:Utilities/misc/stm32_systime.c ****   uint32_t seconds = timeMs / 1000;
 884              		.loc 1 280 1 is_stmt 0 view .LVU244
 885 0000 30B5     		push	{r4, r5, lr}
 886              	.LCFI26:
 887              		.cfi_def_cfa_offset 12
 888              		.cfi_offset 4, -12
 889              		.cfi_offset 5, -8
 890              		.cfi_offset 14, -4
 891 0002 87B0     		sub	sp, sp, #28
 892              	.LCFI27:
 893              		.cfi_def_cfa_offset 40
 894 0004 0446     		mov	r4, r0
 281:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = seconds, .SubSeconds =  timeMs - seconds * 1000 };
 895              		.loc 1 281 3 is_stmt 1 view .LVU245
 281:Utilities/misc/stm32_systime.c ****   SysTime_t sysTime = { .Seconds = seconds, .SubSeconds =  timeMs - seconds * 1000 };
 896              		.loc 1 281 12 is_stmt 0 view .LVU246
 897 0006 124B     		ldr	r3, .L54
 898 0008 A3FB0123 		umull	r2, r3, r3, r1
 899 000c 9B09     		lsrs	r3, r3, #6
 900              	.LVL81:
 282:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
 901              		.loc 1 282 3 is_stmt 1 view .LVU247
 282:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
ARM GAS  /tmp/cclY80Kt.s 			page 28


 902              		.loc 1 282 13 is_stmt 0 view .LVU248
 903 000e 0493     		str	r3, [sp, #16]
 282:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
 904              		.loc 1 282 67 view .LVU249
 905 0010 C3EB4312 		rsb	r2, r3, r3, lsl #5
 906 0014 03EB8203 		add	r3, r3, r2, lsl #2
 907              	.LVL82:
 282:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
 908              		.loc 1 282 67 view .LVU250
 909 0018 A1EBC303 		sub	r3, r1, r3, lsl #3
 282:Utilities/misc/stm32_systime.c ****   SysTime_t DeltaTime = { 0 };
 910              		.loc 1 282 13 view .LVU251
 911 001c ADF81430 		strh	r3, [sp, #20]	@ movhi
 283:Utilities/misc/stm32_systime.c **** 
 912              		.loc 1 283 3 is_stmt 1 view .LVU252
 283:Utilities/misc/stm32_systime.c **** 
 913              		.loc 1 283 13 is_stmt 0 view .LVU253
 914 0020 0023     		movs	r3, #0
 915 0022 0293     		str	r3, [sp, #8]
 916 0024 0393     		str	r3, [sp, #12]
 285:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 917              		.loc 1 285 3 is_stmt 1 view .LVU254
 285:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 918              		.loc 1 285 52 is_stmt 0 view .LVU255
 919 0026 0B4D     		ldr	r5, .L54+4
 920 0028 EB68     		ldr	r3, [r5, #12]
 285:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 921              		.loc 1 285 35 view .LVU256
 922 002a 9847     		blx	r3
 923              	.LVL83:
 285:Utilities/misc/stm32_systime.c ****   DeltaTime.Seconds = UTIL_SYSTIMDriver.BKUPRead_Seconds();
 924              		.loc 1 285 24 view .LVU257
 925 002c ADF80C00 		strh	r0, [sp, #12]	@ movhi
 286:Utilities/misc/stm32_systime.c ****   return SysTimeAdd( sysTime, DeltaTime );
 926              		.loc 1 286 3 is_stmt 1 view .LVU258
 286:Utilities/misc/stm32_systime.c ****   return SysTimeAdd( sysTime, DeltaTime );
 927              		.loc 1 286 40 is_stmt 0 view .LVU259
 928 0030 6B68     		ldr	r3, [r5, #4]
 286:Utilities/misc/stm32_systime.c ****   return SysTimeAdd( sysTime, DeltaTime );
 929              		.loc 1 286 23 view .LVU260
 930 0032 9847     		blx	r3
 931              	.LVL84:
 932 0034 0346     		mov	r3, r0
 286:Utilities/misc/stm32_systime.c ****   return SysTimeAdd( sysTime, DeltaTime );
 933              		.loc 1 286 21 view .LVU261
 934 0036 0290     		str	r0, [sp, #8]
 287:Utilities/misc/stm32_systime.c **** }
 935              		.loc 1 287 3 is_stmt 1 view .LVU262
 287:Utilities/misc/stm32_systime.c **** }
 936              		.loc 1 287 10 is_stmt 0 view .LVU263
 937 0038 039A     		ldr	r2, [sp, #12]
 938 003a 0092     		str	r2, [sp]
 939 003c 06AA     		add	r2, sp, #24
 940 003e 12E90600 		ldmdb	r2, {r1, r2}
 941 0042 2046     		mov	r0, r4
 942 0044 FFF7FEFF 		bl	SysTimeAdd
 943              	.LVL85:
ARM GAS  /tmp/cclY80Kt.s 			page 29


 288:Utilities/misc/stm32_systime.c **** 
 944              		.loc 1 288 1 view .LVU264
 945 0048 2046     		mov	r0, r4
 946 004a 07B0     		add	sp, sp, #28
 947              	.LCFI28:
 948              		.cfi_def_cfa_offset 12
 949              		@ sp needed
 950 004c 30BD     		pop	{r4, r5, pc}
 951              	.LVL86:
 952              	.L55:
 288:Utilities/misc/stm32_systime.c **** 
 953              		.loc 1 288 1 view .LVU265
 954 004e 00BF     		.align	2
 955              	.L54:
 956 0050 D34D6210 		.word	274877907
 957 0054 00000000 		.word	UTIL_SYSTIMDriver
 958              		.cfi_endproc
 959              	.LFE9:
 961              		.section	.text.SysTimeMkTime,"ax",%progbits
 962              		.align	1
 963              		.global	SysTimeMkTime
 964              		.syntax unified
 965              		.thumb
 966              		.thumb_func
 967              		.fpu softvfp
 969              	SysTimeMkTime:
 970              	.LVL87:
 971              	.LFB10:
 291:Utilities/misc/stm32_systime.c ****   uint32_t nbdays;
 972              		.loc 1 291 1 is_stmt 1 view -0
 973              		.cfi_startproc
 974              		@ args = 0, pretend = 0, frame = 16
 975              		@ frame_needed = 0, uses_anonymous_args = 0
 291:Utilities/misc/stm32_systime.c ****   uint32_t nbdays;
 976              		.loc 1 291 1 is_stmt 0 view .LVU267
 977 0000 10B5     		push	{r4, lr}
 978              	.LCFI29:
 979              		.cfi_def_cfa_offset 8
 980              		.cfi_offset 4, -8
 981              		.cfi_offset 14, -4
 982 0002 84B0     		sub	sp, sp, #16
 983              	.LCFI30:
 984              		.cfi_def_cfa_offset 24
 985 0004 8446     		mov	ip, r0
 292:Utilities/misc/stm32_systime.c ****   uint32_t nbsecs;
 986              		.loc 1 292 3 is_stmt 1 view .LVU268
 293:Utilities/misc/stm32_systime.c ****   uint32_t year = localtime->tm_year - CALC_REF_YEAR;
 987              		.loc 1 293 3 view .LVU269
 294:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 988              		.loc 1 294 3 view .LVU270
 294:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 989              		.loc 1 294 28 is_stmt 0 view .LVU271
 990 0006 4369     		ldr	r3, [r0, #20]
 294:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 991              		.loc 1 294 38 view .LVU272
 992 0008 A3F1440E 		sub	lr, r3, #68
 993              	.LVL88:
ARM GAS  /tmp/cclY80Kt.s 			page 30


 295:Utilities/misc/stm32_systime.c ****   {
 994              		.loc 1 295 3 is_stmt 1 view .LVU273
 295:Utilities/misc/stm32_systime.c ****   {
 995              		.loc 1 295 12 is_stmt 0 view .LVU274
 996 000c 1B4B     		ldr	r3, .L58
 997 000e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 998              	.LVL89:
 295:Utilities/misc/stm32_systime.c ****   {
 999              		.loc 1 295 12 view .LVU275
 1000 0010 04AC     		add	r4, sp, #16
 1001 0012 04E90F00 		stmdb	r4, {r0, r1, r2, r3}
 303:Utilities/misc/stm32_systime.c **** 
 1002              		.loc 1 303 3 is_stmt 1 view .LVU276
 303:Utilities/misc/stm32_systime.c **** 
 1003              		.loc 1 303 12 is_stmt 0 view .LVU277
 1004 0016 40F2B553 		movw	r3, #1461
 1005 001a 03FB0EF3 		mul	r3, r3, lr
 1006 001e D91C     		adds	r1, r3, #3
 1007              	.LVL90:
 305:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) ) );
 1008              		.loc 1 305 3 is_stmt 1 view .LVU278
 305:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) ) );
 1009              		.loc 1 305 15 is_stmt 0 view .LVU279
 1010 0020 DCF81020 		ldr	r2, [ip, #16]
 1011 0024 C2EB0213 		rsb	r3, r2, r2, lsl #4
 1012 0028 02EB8303 		add	r3, r2, r3, lsl #2
 1013 002c 581C     		adds	r0, r3, #1
 306:Utilities/misc/stm32_systime.c **** 
 1014              		.loc 1 306 36 view .LVU280
 1015 002e 0EF0030E 		and	lr, lr, #3
 1016              	.LVL91:
 306:Utilities/misc/stm32_systime.c **** 
 1017              		.loc 1 306 30 view .LVU281
 1018 0032 04EB8E0E 		add	lr, r4, lr, lsl #2
 1019 0036 5EF8103C 		ldr	r3, [lr, #-16]
 306:Utilities/misc/stm32_systime.c **** 
 1020              		.loc 1 306 68 view .LVU282
 1021 003a 5200     		lsls	r2, r2, #1
 306:Utilities/misc/stm32_systime.c **** 
 1022              		.loc 1 306 41 view .LVU283
 1023 003c D340     		lsrs	r3, r3, r2
 306:Utilities/misc/stm32_systime.c **** 
 1024              		.loc 1 306 76 view .LVU284
 1025 003e 03F00303 		and	r3, r3, #3
 305:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) ) );
 1026              		.loc 1 305 64 view .LVU285
 1027 0042 C3EB6003 		rsb	r3, r3, r0, asr #1
 305:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) ) );
 1028              		.loc 1 305 10 view .LVU286
 1029 0046 03EB9103 		add	r3, r3, r1, lsr #2
 1030              	.LVL92:
 308:Utilities/misc/stm32_systime.c **** 
 1031              		.loc 1 308 3 is_stmt 1 view .LVU287
 308:Utilities/misc/stm32_systime.c **** 
 1032              		.loc 1 308 24 is_stmt 0 view .LVU288
 1033 004a DCF80C20 		ldr	r2, [ip, #12]
 308:Utilities/misc/stm32_systime.c **** 
ARM GAS  /tmp/cclY80Kt.s 			page 31


 1034              		.loc 1 308 10 view .LVU289
 1035 004e 1344     		add	r3, r3, r2
 1036              	.LVL93:
 308:Utilities/misc/stm32_systime.c **** 
 1037              		.loc 1 308 10 view .LVU290
 1038 0050 5A1E     		subs	r2, r3, #1
 1039              	.LVL94:
 311:Utilities/misc/stm32_systime.c **** 
 1040              		.loc 1 311 3 is_stmt 1 view .LVU291
 313:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_min * TM_SECONDS_IN_1MINUTE ) +
 1041              		.loc 1 313 3 view .LVU292
 313:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_min * TM_SECONDS_IN_1MINUTE ) +
 1042              		.loc 1 313 36 is_stmt 0 view .LVU293
 1043 0052 DCF80010 		ldr	r1, [ip]
 315:Utilities/misc/stm32_systime.c ****   return nbsecs - CALC_REF_YEAR_TO_UNIX_REF_YEAR_COMPENSATION_IN_SECONDS;
 1044              		.loc 1 315 32 view .LVU294
 1045 0056 DCF80800 		ldr	r0, [ip, #8]
 314:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_hour * TM_SECONDS_IN_1HOUR ) );
 1046              		.loc 1 314 32 view .LVU295
 1047 005a DCF80430 		ldr	r3, [ip, #4]
 314:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_hour * TM_SECONDS_IN_1HOUR ) );
 1048              		.loc 1 314 41 view .LVU296
 1049 005e C3EB0313 		rsb	r3, r3, r3, lsl #4
 1050 0062 9B00     		lsls	r3, r3, #2
 314:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_hour * TM_SECONDS_IN_1HOUR ) );
 1051              		.loc 1 314 67 view .LVU297
 1052 0064 4FF4616C 		mov	ip, #3600
 1053              	.LVL95:
 314:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_hour * TM_SECONDS_IN_1HOUR ) );
 1054              		.loc 1 314 67 view .LVU298
 1055 0068 0CFB0033 		mla	r3, ip, r0, r3
 1056 006c 0B44     		add	r3, r3, r1
 313:Utilities/misc/stm32_systime.c ****         ( ( uint32_t )localtime->tm_min * TM_SECONDS_IN_1MINUTE ) +
 1057              		.loc 1 313 10 view .LVU299
 1058 006e 0449     		ldr	r1, .L58+4
 1059 0070 01FB0233 		mla	r3, r1, r2, r3
 1060              	.LVL96:
 316:Utilities/misc/stm32_systime.c **** }
 1061              		.loc 1 316 3 is_stmt 1 view .LVU300
 317:Utilities/misc/stm32_systime.c **** 
 1062              		.loc 1 317 1 is_stmt 0 view .LVU301
 1063 0074 0348     		ldr	r0, .L58+8
 1064 0076 1844     		add	r0, r0, r3
 1065 0078 04B0     		add	sp, sp, #16
 1066              	.LCFI31:
 1067              		.cfi_def_cfa_offset 8
 1068              		@ sp needed
 1069 007a 10BD     		pop	{r4, pc}
 1070              	.L59:
 1071              		.align	2
 1072              	.L58:
 1073 007c 00000000 		.word	.LANCHOR0
 1074 0080 80510100 		.word	86400
 1075 0084 80473CFC 		.word	-63158400
 1076              		.cfi_endproc
 1077              	.LFE10:
 1079              		.section	.text.SysTimeLocalTime,"ax",%progbits
ARM GAS  /tmp/cclY80Kt.s 			page 32


 1080              		.align	1
 1081              		.global	SysTimeLocalTime
 1082              		.syntax unified
 1083              		.thumb
 1084              		.thumb_func
 1085              		.fpu softvfp
 1087              	SysTimeLocalTime:
 1088              	.LVL97:
 1089              	.LFB11:
 320:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 1090              		.loc 1 320 1 is_stmt 1 view -0
 1091              		.cfi_startproc
 1092              		@ args = 0, pretend = 0, frame = 40
 1093              		@ frame_needed = 0, uses_anonymous_args = 0
 320:Utilities/misc/stm32_systime.c ****   uint32_t correctionMonth[4] =
 1094              		.loc 1 320 1 is_stmt 0 view .LVU303
 1095 0000 70B5     		push	{r4, r5, r6, lr}
 1096              	.LCFI32:
 1097              		.cfi_def_cfa_offset 16
 1098              		.cfi_offset 4, -16
 1099              		.cfi_offset 5, -12
 1100              		.cfi_offset 6, -8
 1101              		.cfi_offset 14, -4
 1102 0002 8AB0     		sub	sp, sp, #40
 1103              	.LCFI33:
 1104              		.cfi_def_cfa_offset 56
 1105 0004 0446     		mov	r4, r0
 1106 0006 0D46     		mov	r5, r1
 321:Utilities/misc/stm32_systime.c ****   {
 1107              		.loc 1 321 3 is_stmt 1 view .LVU304
 321:Utilities/misc/stm32_systime.c ****   {
 1108              		.loc 1 321 12 is_stmt 0 view .LVU305
 1109 0008 314B     		ldr	r3, .L62
 1110 000a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1111              	.LVL98:
 321:Utilities/misc/stm32_systime.c ****   {
 1112              		.loc 1 321 12 view .LVU306
 1113 000c 0AAE     		add	r6, sp, #40
 1114 000e 06E90F00 		stmdb	r6, {r0, r1, r2, r3}
 328:Utilities/misc/stm32_systime.c ****   uint32_t seconds;
 1115              		.loc 1 328 3 is_stmt 1 view .LVU307
 1116              	.LVL99:
 329:Utilities/misc/stm32_systime.c ****   uint32_t minutes;
 1117              		.loc 1 329 3 view .LVU308
 330:Utilities/misc/stm32_systime.c ****   uint32_t days;
 1118              		.loc 1 330 3 view .LVU309
 331:Utilities/misc/stm32_systime.c ****   uint32_t divOut;
 1119              		.loc 1 331 3 view .LVU310
 332:Utilities/misc/stm32_systime.c ****   uint32_t divReminder;
 1120              		.loc 1 332 3 view .LVU311
 333:Utilities/misc/stm32_systime.c **** 
 1121              		.loc 1 333 3 view .LVU312
 335:Utilities/misc/stm32_systime.c **** 
 1122              		.loc 1 335 3 view .LVU313
 1123 0012 05AA     		add	r2, sp, #20
 1124 0014 03A9     		add	r1, sp, #12
 1125 0016 2F48     		ldr	r0, .L62+4
ARM GAS  /tmp/cclY80Kt.s 			page 33


 1126 0018 2044     		add	r0, r0, r4
 1127 001a FFF7FEFF 		bl	CalendarDiv86400
 1128              	.LVL100:
 338:Utilities/misc/stm32_systime.c ****   localtime->tm_sec = ( uint8_t )divReminder;
 1129              		.loc 1 338 3 view .LVU314
 1130 001e 01AA     		add	r2, sp, #4
 1131 0020 04A9     		add	r1, sp, #16
 1132 0022 0598     		ldr	r0, [sp, #20]
 1133 0024 FFF7FEFF 		bl	CalendarDiv60
 1134              	.LVL101:
 339:Utilities/misc/stm32_systime.c **** 
 1135              		.loc 1 339 3 view .LVU315
 339:Utilities/misc/stm32_systime.c **** 
 1136              		.loc 1 339 23 is_stmt 0 view .LVU316
 1137 0028 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 339:Utilities/misc/stm32_systime.c **** 
 1138              		.loc 1 339 21 view .LVU317
 1139 002c 2B60     		str	r3, [r5]
 342:Utilities/misc/stm32_systime.c ****   localtime->tm_min = ( uint8_t )divReminder;
 1140              		.loc 1 342 3 is_stmt 1 view .LVU318
 1141 002e 01AA     		add	r2, sp, #4
 1142 0030 02A9     		add	r1, sp, #8
 1143 0032 0498     		ldr	r0, [sp, #16]
 1144 0034 FFF7FEFF 		bl	CalendarDiv60
 1145              	.LVL102:
 343:Utilities/misc/stm32_systime.c ****   localtime->tm_hour = ( uint8_t )divOut;
 1146              		.loc 1 343 3 view .LVU319
 343:Utilities/misc/stm32_systime.c ****   localtime->tm_hour = ( uint8_t )divOut;
 1147              		.loc 1 343 23 is_stmt 0 view .LVU320
 1148 0038 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 343:Utilities/misc/stm32_systime.c ****   localtime->tm_hour = ( uint8_t )divOut;
 1149              		.loc 1 343 21 view .LVU321
 1150 003c 6B60     		str	r3, [r5, #4]
 344:Utilities/misc/stm32_systime.c **** 
 1151              		.loc 1 344 3 is_stmt 1 view .LVU322
 344:Utilities/misc/stm32_systime.c **** 
 1152              		.loc 1 344 24 is_stmt 0 view .LVU323
 1153 003e 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 344:Utilities/misc/stm32_systime.c **** 
 1154              		.loc 1 344 22 view .LVU324
 1155 0042 AB60     		str	r3, [r5, #8]
 347:Utilities/misc/stm32_systime.c ****   days-= DIVC_BY_4( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * localtime->tm_year );
 1156              		.loc 1 347 3 is_stmt 1 view .LVU325
 347:Utilities/misc/stm32_systime.c ****   days-= DIVC_BY_4( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * localtime->tm_year );
 1157              		.loc 1 347 24 is_stmt 0 view .LVU326
 1158 0044 039E     		ldr	r6, [sp, #12]
 1159 0046 244B     		ldr	r3, .L62+8
 1160 0048 45F6DE04 		movw	r4, #22750
 1161              	.LVL103:
 347:Utilities/misc/stm32_systime.c ****   days-= DIVC_BY_4( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * localtime->tm_year );
 1162              		.loc 1 347 24 view .LVU327
 1163 004c 03FB0644 		mla	r4, r3, r6, r4
 1164 0050 640E     		lsrs	r4, r4, #25
 347:Utilities/misc/stm32_systime.c ****   days-= DIVC_BY_4( ( TM_DAYS_IN_YEAR * 3 + TM_DAYS_IN_LEAP_YEAR ) * localtime->tm_year );
 1165              		.loc 1 347 22 view .LVU328
 1166 0052 6C61     		str	r4, [r5, #20]
 348:Utilities/misc/stm32_systime.c **** 
ARM GAS  /tmp/cclY80Kt.s 			page 34


 1167              		.loc 1 348 3 is_stmt 1 view .LVU329
 348:Utilities/misc/stm32_systime.c **** 
 1168              		.loc 1 348 10 is_stmt 0 view .LVU330
 1169 0054 40F2B550 		movw	r0, #1461
 1170 0058 04FB00F0 		mul	r0, r4, r0
 1171 005c 0330     		adds	r0, r0, #3
 348:Utilities/misc/stm32_systime.c **** 
 1172              		.loc 1 348 7 view .LVU331
 1173 005e A6EB9006 		sub	r6, r6, r0, lsr #2
 1174 0062 0396     		str	r6, [sp, #12]
 350:Utilities/misc/stm32_systime.c **** 
 1175              		.loc 1 350 3 is_stmt 1 view .LVU332
 350:Utilities/misc/stm32_systime.c **** 
 1176              		.loc 1 350 22 is_stmt 0 view .LVU333
 1177 0064 EE61     		str	r6, [r5, #28]
 353:Utilities/misc/stm32_systime.c **** 
 1178              		.loc 1 353 3 is_stmt 1 view .LVU334
 353:Utilities/misc/stm32_systime.c **** 
 1179              		.loc 1 353 23 is_stmt 0 view .LVU335
 1180 0066 2146     		mov	r1, r4
 1181 0068 3046     		mov	r0, r6
 1182 006a FFF7FEFF 		bl	CalendarGetMonth
 1183              	.LVL104:
 353:Utilities/misc/stm32_systime.c **** 
 1184              		.loc 1 353 21 view .LVU336
 1185 006e 2861     		str	r0, [r5, #16]
 356:Utilities/misc/stm32_systime.c ****   weekDays += days;
 1186              		.loc 1 356 3 is_stmt 1 view .LVU337
 356:Utilities/misc/stm32_systime.c ****   weekDays += days;
 1187              		.loc 1 356 15 is_stmt 0 view .LVU338
 1188 0070 04EB8403 		add	r3, r4, r4, lsl #2
 1189 0074 0333     		adds	r3, r3, #3
 1190 0076 9B10     		asrs	r3, r3, #2
 356:Utilities/misc/stm32_systime.c ****   weekDays += days;
 1191              		.loc 1 356 12 view .LVU339
 1192 0078 0133     		adds	r3, r3, #1
 1193              	.LVL105:
 357:Utilities/misc/stm32_systime.c ****   localtime->tm_wday = MODULO_7( weekDays );
 1194              		.loc 1 357 3 is_stmt 1 view .LVU340
 357:Utilities/misc/stm32_systime.c ****   localtime->tm_wday = MODULO_7( weekDays );
 1195              		.loc 1 357 12 is_stmt 0 view .LVU341
 1196 007a 3344     		add	r3, r3, r6
 1197              	.LVL106:
 358:Utilities/misc/stm32_systime.c **** 
 1198              		.loc 1 358 3 is_stmt 1 view .LVU342
 358:Utilities/misc/stm32_systime.c **** 
 1199              		.loc 1 358 24 is_stmt 0 view .LVU343
 1200 007c 174A     		ldr	r2, .L62+12
 1201 007e 03FB0222 		mla	r2, r3, r2, r2
 1202 0082 520D     		lsrs	r2, r2, #21
 1203 0084 C2EBC202 		rsb	r2, r2, r2, lsl #3
 1204 0088 9B1A     		subs	r3, r3, r2
 1205              	.LVL107:
 358:Utilities/misc/stm32_systime.c **** 
 1206              		.loc 1 358 22 view .LVU344
 1207 008a AB61     		str	r3, [r5, #24]
 360:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[localtime->tm_year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) )
ARM GAS  /tmp/cclY80Kt.s 			page 35


 1208              		.loc 1 360 3 is_stmt 1 view .LVU345
 361:Utilities/misc/stm32_systime.c **** 
 1209              		.loc 1 361 50 is_stmt 0 view .LVU346
 1210 008c 6242     		rsbs	r2, r4, #0
 1211 008e 04F00303 		and	r3, r4, #3
 1212 0092 02F00302 		and	r2, r2, #3
 1213 0096 58BF     		it	pl
 1214 0098 5342     		rsbpl	r3, r2, #0
 361:Utilities/misc/stm32_systime.c **** 
 1215              		.loc 1 361 30 view .LVU347
 1216 009a 0AAA     		add	r2, sp, #40
 1217 009c 02EB8303 		add	r3, r2, r3, lsl #2
 1218 00a0 53F8103C 		ldr	r3, [r3, #-16]
 361:Utilities/misc/stm32_systime.c **** 
 1219              		.loc 1 361 82 view .LVU348
 1220 00a4 4200     		lsls	r2, r0, #1
 361:Utilities/misc/stm32_systime.c **** 
 1221              		.loc 1 361 55 view .LVU349
 1222 00a6 D340     		lsrs	r3, r3, r2
 361:Utilities/misc/stm32_systime.c **** 
 1223              		.loc 1 361 90 view .LVU350
 1224 00a8 03F00303 		and	r3, r3, #3
 360:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[localtime->tm_year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) )
 1225              		.loc 1 360 13 view .LVU351
 1226 00ac C0EB0012 		rsb	r2, r0, r0, lsl #4
 1227 00b0 00EB8200 		add	r0, r0, r2, lsl #2
 1228 00b4 0130     		adds	r0, r0, #1
 360:Utilities/misc/stm32_systime.c ****         ( ( ( correctionMonth[localtime->tm_year % 4] >> ( ( localtime->tm_mon ) * 2 ) ) & 0x03 ) )
 1229              		.loc 1 360 8 view .LVU352
 1230 00b6 A3EB6000 		sub	r0, r3, r0, asr #1
 1231 00ba 3044     		add	r0, r0, r6
 1232 00bc 0390     		str	r0, [sp, #12]
 364:Utilities/misc/stm32_systime.c **** 
 1233              		.loc 1 364 3 is_stmt 1 view .LVU353
 364:Utilities/misc/stm32_systime.c **** 
 1234              		.loc 1 364 29 is_stmt 0 view .LVU354
 1235 00be 0130     		adds	r0, r0, #1
 364:Utilities/misc/stm32_systime.c **** 
 1236              		.loc 1 364 22 view .LVU355
 1237 00c0 E860     		str	r0, [r5, #12]
 366:Utilities/misc/stm32_systime.c **** 
 1238              		.loc 1 366 3 is_stmt 1 view .LVU356
 366:Utilities/misc/stm32_systime.c **** 
 1239              		.loc 1 366 22 is_stmt 0 view .LVU357
 1240 00c2 4434     		adds	r4, r4, #68
 1241              	.LVL108:
 366:Utilities/misc/stm32_systime.c **** 
 1242              		.loc 1 366 22 view .LVU358
 1243 00c4 6C61     		str	r4, [r5, #20]
 368:Utilities/misc/stm32_systime.c **** }
 1244              		.loc 1 368 3 is_stmt 1 view .LVU359
 368:Utilities/misc/stm32_systime.c **** }
 1245              		.loc 1 368 23 is_stmt 0 view .LVU360
 1246 00c6 4FF0FF33 		mov	r3, #-1
 1247 00ca 2B62     		str	r3, [r5, #32]
 369:Utilities/misc/stm32_systime.c **** 
 1248              		.loc 1 369 1 view .LVU361
ARM GAS  /tmp/cclY80Kt.s 			page 36


 1249 00cc 0AB0     		add	sp, sp, #40
 1250              	.LCFI34:
 1251              		.cfi_def_cfa_offset 16
 1252              		@ sp needed
 1253 00ce 70BD     		pop	{r4, r5, r6, pc}
 1254              	.LVL109:
 1255              	.L63:
 369:Utilities/misc/stm32_systime.c **** 
 1256              		.loc 1 369 1 view .LVU362
 1257              		.align	2
 1258              	.L62:
 1259 00d0 00000000 		.word	.LANCHOR0
 1260 00d4 80B8C303 		.word	63158400
 1261 00d8 DB660100 		.word	91867
 1262 00dc 49920400 		.word	299593
 1263              		.cfi_endproc
 1264              	.LFE11:
 1266              		.global	WeekDayString
 1267              		.section	.rodata.str1.4,"aMS",%progbits,1
 1268              		.align	2
 1269              	.LC1:
 1270 0000 53756E00 		.ascii	"Sun\000"
 1271              		.align	2
 1272              	.LC2:
 1273 0004 4D6F6E00 		.ascii	"Mon\000"
 1274              		.align	2
 1275              	.LC3:
 1276 0008 54756500 		.ascii	"Tue\000"
 1277              		.align	2
 1278              	.LC4:
 1279 000c 57656400 		.ascii	"Wed\000"
 1280              		.align	2
 1281              	.LC5:
 1282 0010 54687500 		.ascii	"Thu\000"
 1283              		.align	2
 1284              	.LC6:
 1285 0014 46726900 		.ascii	"Fri\000"
 1286              		.align	2
 1287              	.LC7:
 1288 0018 53617400 		.ascii	"Sat\000"
 1289              		.section	.rodata
 1290              		.align	2
 1291              		.set	.LANCHOR0,. + 0
 1292              	.LC0:
 1293 0000 50554400 		.word	4478288
 1294 0004 A0AA9900 		.word	10070688
 1295 0008 A0AA9900 		.word	10070688
 1296 000c A0AA9900 		.word	10070688
 1297              		.section	.data.WeekDayString,"aw"
 1298              		.align	2
 1301              	WeekDayString:
 1302 0000 00000000 		.word	.LC1
 1303 0004 04000000 		.word	.LC2
 1304 0008 08000000 		.word	.LC3
 1305 000c 0C000000 		.word	.LC4
 1306 0010 10000000 		.word	.LC5
 1307 0014 14000000 		.word	.LC6
ARM GAS  /tmp/cclY80Kt.s 			page 37


 1308 0018 18000000 		.word	.LC7
 1309              		.text
 1310              	.Letext0:
 1311              		.file 2 "/home/eatkinso/Downloads/gcc-arm-none-eabi-10.3-2021.07/gcc-arm-none-eabi-10.3-2021.07/ar
 1312              		.file 3 "/home/eatkinso/Downloads/gcc-arm-none-eabi-10.3-2021.07/gcc-arm-none-eabi-10.3-2021.07/ar
 1313              		.file 4 "/home/eatkinso/Downloads/gcc-arm-none-eabi-10.3-2021.07/gcc-arm-none-eabi-10.3-2021.07/ar
 1314              		.file 5 "Utilities/misc/stm32_systime.h"
ARM GAS  /tmp/cclY80Kt.s 			page 38


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32_systime.c
     /tmp/cclY80Kt.s:16     .text.CalendarDiv86400:0000000000000000 $t
     /tmp/cclY80Kt.s:23     .text.CalendarDiv86400:0000000000000000 CalendarDiv86400
     /tmp/cclY80Kt.s:110    .text.CalendarDiv86400:0000000000000038 $d
     /tmp/cclY80Kt.s:116    .text.CalendarDiv61:0000000000000000 $t
     /tmp/cclY80Kt.s:122    .text.CalendarDiv61:0000000000000000 CalendarDiv61
     /tmp/cclY80Kt.s:188    .text.CalendarDiv61:0000000000000030 $d
     /tmp/cclY80Kt.s:193    .text.CalendarGetMonth:0000000000000000 $t
     /tmp/cclY80Kt.s:199    .text.CalendarGetMonth:0000000000000000 CalendarGetMonth
     /tmp/cclY80Kt.s:327    .text.CalendarDiv60:0000000000000000 $t
     /tmp/cclY80Kt.s:333    .text.CalendarDiv60:0000000000000000 CalendarDiv60
     /tmp/cclY80Kt.s:415    .text.SysTimeAdd:0000000000000000 $t
     /tmp/cclY80Kt.s:422    .text.SysTimeAdd:0000000000000000 SysTimeAdd
     /tmp/cclY80Kt.s:488    .text.SysTimeSub:0000000000000000 $t
     /tmp/cclY80Kt.s:495    .text.SysTimeSub:0000000000000000 SysTimeSub
     /tmp/cclY80Kt.s:567    .text.SysTimeSet:0000000000000000 $t
     /tmp/cclY80Kt.s:574    .text.SysTimeSet:0000000000000000 SysTimeSet
     /tmp/cclY80Kt.s:639    .text.SysTimeSet:0000000000000040 $d
     /tmp/cclY80Kt.s:644    .text.SysTimeGet:0000000000000000 $t
     /tmp/cclY80Kt.s:651    .text.SysTimeGet:0000000000000000 SysTimeGet
     /tmp/cclY80Kt.s:730    .text.SysTimeGet:0000000000000040 $d
     /tmp/cclY80Kt.s:735    .text.SysTimeGetMcuTime:0000000000000000 $t
     /tmp/cclY80Kt.s:742    .text.SysTimeGetMcuTime:0000000000000000 SysTimeGetMcuTime
     /tmp/cclY80Kt.s:794    .text.SysTimeGetMcuTime:0000000000000028 $d
     /tmp/cclY80Kt.s:799    .text.SysTimeToMs:0000000000000000 $t
     /tmp/cclY80Kt.s:806    .text.SysTimeToMs:0000000000000000 SysTimeToMs
     /tmp/cclY80Kt.s:865    .text.SysTimeToMs:000000000000003c $d
     /tmp/cclY80Kt.s:870    .text.SysTimeFromMs:0000000000000000 $t
     /tmp/cclY80Kt.s:877    .text.SysTimeFromMs:0000000000000000 SysTimeFromMs
     /tmp/cclY80Kt.s:956    .text.SysTimeFromMs:0000000000000050 $d
     /tmp/cclY80Kt.s:962    .text.SysTimeMkTime:0000000000000000 $t
     /tmp/cclY80Kt.s:969    .text.SysTimeMkTime:0000000000000000 SysTimeMkTime
     /tmp/cclY80Kt.s:1073   .text.SysTimeMkTime:000000000000007c $d
     /tmp/cclY80Kt.s:1080   .text.SysTimeLocalTime:0000000000000000 $t
     /tmp/cclY80Kt.s:1087   .text.SysTimeLocalTime:0000000000000000 SysTimeLocalTime
     /tmp/cclY80Kt.s:1259   .text.SysTimeLocalTime:00000000000000d0 $d
     /tmp/cclY80Kt.s:1301   .data.WeekDayString:0000000000000000 WeekDayString
     /tmp/cclY80Kt.s:1268   .rodata.str1.4:0000000000000000 $d
     /tmp/cclY80Kt.s:1290   .rodata:0000000000000000 $d
     /tmp/cclY80Kt.s:1298   .data.WeekDayString:0000000000000000 $d

UNDEFINED SYMBOLS
UTIL_SYSTIMDriver
